<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CodePen - D3 Racing Bars</title>
  <style>
    @import url("https://fonts.googleapis.com/css?family=Josefin+Sans:400,700&display=swap");

    body {
      border-top: 4px solid #dc0000;
      background: repeating-linear-gradient(
          -45deg,
          #181618 0px,
          #181618 8px,
          #141314 0px,
          #141314 16px
        ),
        #141314;
      color: #edeced;
      font-family: "Josefin Sans", sans-serif;
    }

    /* center the visualization horizontally */
    .viz {
      margin: 1.5rem auto;
      width: 90vw;
      max-width: 700px;
      background: #010001;
      padding: 1.5rem 2rem;
    }

  </style>
</head>
<body>
  <div class="viz">
    <!-- Display the current year -->
    <div id="currentYearDisplay"></div>
    <!-- Add the slider for changing the year -->
    <input type="range" id="yearSlider" min="0" max="35" step="1" value="0">
  </div>

  <!-- SVG-elementti -->
  <svg id="mapSvg" width="1850" height="3220"></svg>

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script>

const tyopaikatData = [
{ vuosi: 1987, sukupuoli: 'M', sektori: 'Y',mk01:217270,mk02:61097,mk04:33918,mk05:20932,mk06:61102,mk07:30518,mk08:26155,mk09:17677,mk10:16342,mk11:28672,mk12:16369,mk13:28801,mk14:22027,mk15:24263,mk16:7243,mk17:32666,mk18:8050,mk19:14659},
{ vuosi: 1988, sukupuoli: 'M', sektori: 'Y',mk01:219361,mk02:62903,mk04:34135,mk05:20699,mk06:62712,mk07:31910,mk08:26000,mk09:18022,mk10:17505,mk11:29262,mk12:16969,mk13:29616,mk14:22397,mk15:24491,mk16:6929,mk17:34800,mk18:8396,mk19:15143},
{ vuosi: 1989, sukupuoli: 'M', sektori: 'Y',mk01:227382,mk02:62895,mk04:34604,mk05:21199,mk06:64025,mk07:32735,mk08:26462,mk09:18747,mk10:17434,mk11:31001,mk12:17639,mk13:30451,mk14:23399,mk15:25551,mk16:6940,mk17:37427,mk18:8691,mk19:16967},
{ vuosi: 1990, sukupuoli: 'M', sektori: 'Y',mk01:222255,mk02:60419,mk04:32673,mk05:19677,mk06:60648,mk07:30839,mk08:24850,mk09:17817,mk10:16428,mk11:27531,mk12:16381,mk13:28108,mk14:21787,mk15:23682,mk16:6287,mk17:33875,mk18:7857,mk19:15116},
{ vuosi: 1991, sukupuoli: 'M', sektori: 'Y',mk01:192131,mk02:52555,mk04:28083,mk05:16977,mk06:49340,mk07:25828,mk08:21399,mk09:14636,mk10:13757,mk11:22989,mk12:13355,mk13:24316,mk14:18221,mk15:21075,mk16:5309,mk17:28600,mk18:6790,mk19:12913},
{ vuosi: 1992, sukupuoli: 'M', sektori: 'Y',mk01:169873,mk02:47725,mk04:24179,mk05:14445,mk06:44510,mk07:22775,mk08:19247,mk09:12990,mk10:12030,mk11:20000,mk12:11488,mk13:21449,mk14:15732,mk15:18958,mk16:4747,mk17:25591,mk18:5861,mk19:10973},
{ vuosi: 1993, sukupuoli: 'M', sektori: 'Y',mk01:155996,mk02:43533,mk04:21956,mk05:13198,mk06:40651,mk07:20425,mk08:16943,mk09:11931,mk10:10932,mk11:18268,mk12:10536,mk13:19140,mk14:14250,mk15:17750,mk16:4445,mk17:23275,mk18:5307,mk19:9663},
{ vuosi: 1993, sukupuoli: 'M', sektori: 'Y',mk01:166199,mk02:48080,mk04:24264,mk05:14468,mk06:45050,mk07:21726,mk08:18224,mk09:12731,mk10:11819,mk11:19430,mk12:11463,mk13:20677,mk14:16098,mk15:19254,mk16:4856,mk17:26086,mk18:5837,mk19:10732},
{ vuosi: 1995, sukupuoli: 'M', sektori: 'Y',mk01:173524,mk02:50789,mk04:25577,mk05:14669,mk06:46954,mk07:22768,mk08:18888,mk09:13760,mk10:12306,mk11:19857,mk12:11676,mk13:21210,mk14:16629,mk15:20160,mk16:5036,mk17:28322,mk18:5577,mk19:11240},
{ vuosi: 1996, sukupuoli: 'M', sektori: 'Y',mk01:184023,mk02:51644,mk04:24991,mk05:15173,mk06:50066,mk07:23521,mk08:19303,mk09:15388,mk10:12662,mk11:21277,mk12:12110,mk13:22209,mk14:17637,mk15:21156,mk16:5253,mk17:30892,mk18:5590,mk19:13115},
{ vuosi: 1997, sukupuoli: 'M', sektori: 'Y',mk01:201680,mk02:57589,mk04:27305,mk05:18501,mk06:57779,mk07:26346,mk08:23053,mk09:16694,mk10:13490,mk11:23745,mk12:14240,mk13:27987,mk14:20097,mk15:22876,mk16:5841,mk17:39020,mk18:6889,mk19:14244},
{ vuosi: 1998, sukupuoli: 'M', sektori: 'Y',mk01:222632,mk02:62112,mk04:29222,mk05:19333,mk06:62639,mk07:27769,mk08:23860,mk09:17615,mk10:14617,mk11:25862,mk12:15640,mk13:29197,mk14:21821,mk15:24689,mk16:6288,mk17:42893,mk18:7799,mk19:15602},
{ vuosi: 1999, sukupuoli: 'M', sektori: 'Y',mk01:234436,mk02:63878,mk04:28955,mk05:19673,mk06:64638,mk07:28836,mk08:23743,mk09:17559,mk10:15176,mk11:26857,mk12:16543,mk13:31047,mk14:22315,mk15:24661,mk16:6484,mk17:45437,mk18:7952,mk19:16180},
{ vuosi: 2000, sukupuoli: 'M', sektori: 'Y',mk01:247232,mk02:67100,mk04:31231,mk05:20497,mk06:67972,mk07:30115,mk08:24300,mk09:18900,mk10:15287,mk11:27942,mk12:17420,mk13:32882,mk14:23620,mk15:25950,mk16:6859,mk17:49083,mk18:8254,mk19:16620},
{ vuosi: 2001, sukupuoli: 'M', sektori: 'Y',mk01:250291,mk02:66841,mk04:31124,mk05:20714,mk06:68634,mk07:29642,mk08:24424,mk09:18408,mk10:15789,mk11:28100,mk12:17453,mk13:32838,mk14:23585,mk15:26269,mk16:7108,mk17:49326,mk18:7818,mk19:16476},
{ vuosi: 2002, sukupuoli: 'M', sektori: 'Y',mk01:248855,mk02:66866,mk04:30665,mk05:20737,mk06:69464,mk07:29367,mk08:24497,mk09:18314,mk10:15662,mk11:28695,mk12:18145,mk13:33408,mk14:23878,mk15:26291,mk16:7367,mk17:49674,mk18:7775,mk19:17131},
{ vuosi: 2003, sukupuoli: 'M', sektori: 'Y',mk01:249135,mk02:64951,mk04:30695,mk05:21123,mk06:69604,mk07:29278,mk08:24782,mk09:18343,mk10:15875,mk11:29659,mk12:18560,mk13:33942,mk14:24435,mk15:26810,mk16:8020,mk17:50744,mk18:8093,mk19:17678},
{ vuosi: 2003, sukupuoli: 'M', sektori: 'Y',mk01:251519,mk02:66656,mk04:31116,mk05:21360,mk06:71469,mk07:29598,mk08:25071,mk09:18513,mk10:16101,mk11:30293,mk12:19259,mk13:34987,mk14:24672,mk15:27041,mk16:8131,mk17:51701,mk18:8329,mk19:17973},
{ vuosi: 2005, sukupuoli: 'M', sektori: 'Y',mk01:254904,mk02:68022,mk04:33243,mk05:21268,mk06:72202,mk07:29302,mk08:25047,mk09:18288,mk10:16049,mk11:30586,mk12:20186,mk13:34787,mk14:25245,mk15:27677,mk16:8506,mk17:52626,mk18:8220,mk19:20041},
{ vuosi: 2006, sukupuoli: 'M', sektori: 'Y',mk01:261073,mk02:70332,mk04:33850,mk05:22146,mk06:75562,mk07:30331,mk08:25320,mk09:18603,mk10:16792,mk11:31673,mk12:20313,mk13:35979,mk14:26208,mk15:28909,mk16:9083,mk17:54949,mk18:8467,mk19:20712},
{ vuosi: 2007, sukupuoli: 'M', sektori: 'Y',mk01:270421,mk02:71770,mk04:34816,mk05:22806,mk06:78453,mk07:31354,mk08:25338,mk09:19176,mk10:17274,mk11:32825,mk12:20617,mk13:37117,mk14:27226,mk15:30388,mk16:9602,mk17:56582,mk18:9070,mk19:21541},
{ vuosi: 2008, sukupuoli: 'M', sektori: 'Y',mk01:272965,mk02:71182,mk04:34588,mk05:21901,mk06:76489,mk07:30170,mk08:24066,mk09:18448,mk10:16823,mk11:32199,mk12:19692,mk13:36783,mk14:26096,mk15:30429,mk16:9283,mk17:55978,mk18:8640,mk19:21079},
{ vuosi: 2009, sukupuoli: 'M', sektori: 'Y',mk01:257776,mk02:64620,mk04:32108,mk05:20361,mk06:68904,mk07:27188,mk08:21544,mk09:16770,mk10:15428,mk11:29604,mk12:18358,mk13:33923,mk14:24136,mk15:28063,mk16:8839,mk17:52523,mk18:8175,mk19:19601},
{ vuosi: 2010, sukupuoli: 'M', sektori: 'Y',mk01:264246,mk02:64440,mk04:32388,mk05:20833,mk06:72076,mk07:28118,mk08:22094,mk09:17229,mk10:15892,mk11:30903,mk12:19524,mk13:35030,mk14:25787,mk15:28995,mk16:9035,mk17:54352,mk18:8672,mk19:20566},
{ vuosi: 2011, sukupuoli: 'M', sektori: 'Y',mk01:269079,mk02:65661,mk04:32429,mk05:21038,mk06:73880,mk07:28032,mk08:21651,mk09:17617,mk10:15802,mk11:31516,mk12:19679,mk13:35246,mk14:25883,mk15:29342,mk16:8954,mk17:55230,mk18:8716,mk19:20721},
{ vuosi: 2012, sukupuoli: 'M', sektori: 'Y',mk01:269530,mk02:63673,mk04:31697,mk05:20930,mk06:71915,mk07:27321,mk08:20399,mk09:17312,mk10:15244,mk11:31166,mk12:19245,mk13:34026,mk14:25187,mk15:29170,mk16:8867,mk17:53219,mk18:8436,mk19:20052},
{ vuosi: 2013, sukupuoli: 'M', sektori: 'Y',mk01:265815,mk02:62301,mk04:31306,mk05:20253,mk06:69776,mk07:26512,mk08:19988,mk09:17107,mk10:15032,mk11:30370,mk12:19019,mk13:32480,mk14:24450,mk15:28905,mk16:8787,mk17:52348,mk18:7791,mk19:19214},
{ vuosi: 2013, sukupuoli: 'M', sektori: 'Y',mk01:265198,mk02:61602,mk04:30063,mk05:19980,mk06:68786,mk07:25814,mk08:19698,mk09:16599,mk10:14902,mk11:29983,mk12:18502,mk13:32634,mk14:23680,mk15:28683,mk16:8722,mk17:52150,mk18:7553,mk19:19331},
{ vuosi: 2015, sukupuoli: 'M', sektori: 'Y',mk01:268880,mk02:62306,mk04:29636,mk05:19955,mk06:69687,mk07:26039,mk08:19363,mk09:15937,mk10:14403,mk11:29952,mk12:18177,mk13:33091,mk14:23658,mk15:28362,mk16:8602,mk17:53290,mk18:7746,mk19:19470},
{ vuosi: 2016, sukupuoli: 'M', sektori: 'Y',mk01:273990,mk02:63849,mk04:29764,mk05:20156,mk06:70808,mk07:27259,mk08:19222,mk09:16069,mk10:14985,mk11:30670,mk12:18576,mk13:34161,mk14:24527,mk15:28065,mk16:8749,mk17:54584,mk18:7830,mk19:20314},
{ vuosi: 2017, sukupuoli: 'M', sektori: 'Y',mk01:286666,mk02:68574,mk04:31499,mk05:20428,mk06:75750,mk07:27874,mk08:20129,mk09:16381,mk10:15276,mk11:31679,mk12:19631,mk13:35978,mk14:25515,mk15:29401,mk16:9016,mk17:57554,mk18:7795,mk19:20959},
{ vuosi: 2018, sukupuoli: 'M', sektori: 'Y',mk01:296207,mk02:70487,mk04:31625,mk05:20399,mk06:78640,mk07:27870,mk08:20373,mk09:16574,mk10:15291,mk11:32110,mk12:19859,mk13:36211,mk14:25923,mk15:30076,mk16:9355,mk17:59829,mk18:8192,mk19:21798},
{ vuosi: 2013, sukupuoli: 'M', sektori: 'Y',mk01:299385,mk02:69430,mk04:30563,mk05:19977,mk06:79439,mk07:27670,mk08:19980,mk09:15860,mk10:14958,mk11:32214,mk12:19117,mk13:35602,mk14:25188,mk15:29919,mk16:9168,mk17:59433,mk18:7896,mk19:22219},
{ vuosi: 2020, sukupuoli: 'M', sektori: 'Y',mk01:282138,mk02:63510,mk04:28602,mk05:19129,mk06:73457,mk07:25595,mk08:18941,mk09:15271,mk10:14083,mk11:30445,mk12:18116,mk13:33937,mk14:24208,mk15:27861,mk16:8990,mk17:57530,mk18:7848,mk19:20666},
{ vuosi: 2021, sukupuoli: 'M', sektori: 'Y',mk01:300168,mk02:69810,mk04:30711,mk05:20347,mk06:80188,mk07:27419,mk08:19914,mk09:16170,mk10:14594,mk11:32878,mk12:19610,mk13:35621,mk14:25861,mk15:30372,mk16:9317,mk17:61340,mk18:8154,mk19:22212},
{ vuosi: 2022, sukupuoli: 'M', sektori: 'Y',mk01:311919,mk02:70851,mk04:30712,mk05:20398,mk06:82773,mk07:27351,mk08:20094,mk09:16207,mk10:14630,mk11:32792,mk12:19696,mk13:36113,mk14:26005,mk15:30840,mk16:9568,mk17:62457,mk18:8323,mk19:22432},
    ];

    const varisavyt = [10, 30, 50, 70, 90, 110, 130, 150, 170, 190];

    const vdata = [
      { id: 'mk01', color: 'rgb(110, 182, 252)' },
      { id: 'mk02', color: 'rgb(130, 182, 252)' },
      { id: 'mk04', color: 'rgb(150, 182, 252)' },
      { id: 'mk05', color: 'rgb(70, 182, 252)' },
      { id: 'mk06', color: 'rgb(80, 182, 252)' },
      { id: 'mk07', color: 'rgb(10, 182, 252)' },
      { id: 'mk08', color: 'rgb(10, 182, 252)' },
      { id: 'mk09', color: 'rgb(10, 182, 252)' },
      { id: 'mk10', color: 'rgb(10, 182, 252)' },
      { id: 'mk11', color: 'rgb(10, 182, 252)' },
      { id: 'mk12', color: 'rgb(10, 182, 252)' },
      { id: 'mk13', color: 'rgb(10, 182, 252)' },
      { id: 'mk14', color: 'rgb(10, 182, 252)' },
      { id: 'mk15', color: 'rgb(10, 182, 252)' },
      { id: 'mk16', color: 'rgb(10, 182, 252)' },
      { id: 'mk17', color: 'rgb(10, 182, 252)' },
      { id: 'mk18', color: 'rgb(10, 182, 252)' },
      { id: 'mk19', color: 'rgb(10, 182, 252)' },
      { id: 'isuomi', color: 'blue' },
      { id: 'lsuomi', color: 'red' },
      { id: 'psuomi', color: 'green' },
      { id: 'osuomi', color: 'yellow' },
      { id: 'esuomi', color: 'yellow' }, 
      // ... Lisää tarvittaessa muita taulukon tietoja
    ];

    let currentYear = 0; // Seurataan nykyistä vuotta

    // SVG-elementti
    const svg = d3.select("#mapSvg");

    // Luo taulukot SVG:ssä
    svg.selectAll("polygon")
      .data(vdata)
      .enter().append("polygon")
        .attr("id", d => d.id)
        .attr("class", "polygon")
        .attr("points", d => calculatePoints(d.id))
        .style("fill", d => d.color)
        .style("stroke", "#636347")
        .style("stroke-width", 2.8347);

    // Funktio, joka laskee taulukon pisteet id:n perusteella
    function calculatePoints(id) {
      // Lisää tarvittaessa pisteet kaikille id:ille
      switch (id) {
	  case 'mk01':
	    return "108.5,448 109.8,449.2 114,447.9 115.3,448.1 117.3,446.7 117.4,448.7 120.4,448.1 122.3,449.8 124.3,448.7 124.5,446.6 124.5,446.6 126.9,447.8 128.1,450.8 129.5,450.8 130.3,452.8 132.4,453 133.3,451.2 134.9,451.3 135.8,453.7 133.8,453.8 130.7,457 130.5,460.5 130.4,460.5 128,462.9 126.8,462.8 126.1,461.2 124.6,461.3 124.7,463.4 123.9,464.7 123,464.8 122.3,463.1 120.6,461.4 118.3,459.2 118.1,460.4 119.5,462.3 119.9,463.9 121.3,466.4 120.5,466.7 119.4,466.2 118.6,466.4 118.8,468.3 118,468.6 116.7,466 116.1,466.6 116.8,468.8 116.2,469.6 114.9,468.8 113.8,470 113.1,469.9 111.2,467.5 110.6,465.4 108.2,465.6 108.1,467.6 107.2,468.7 103.6,468.8 101.5,469.4 101.5,469.6 100.7,469.8 100.4,470.8 99.2,472.4 97.6,471.9 97.8,473.8 96.2,475.2 95.9,473.4 95.2,474.5 93.1,474.5 91.6,473.5 87.5,474.9 86.8,474.1 86.4,474.9 86.4,476.4 82,481.9 80.6,481.8 82.6,479.2 81.7,478.7 80.6,479.6 79.9,479.6 80,476.7 76.7,478.6 72.2,478.7 66.7,481 64,481.3 64.4,482.7 63.4,483.4 61.5,483 59.1,483.5 58,482.7 56.1,482.5 54.6,484.1 54.6,485.2 52.7,486.8 49,486.8 45.8,488.1 44.8,486.8 45.8,485.7 49.9,484.2 50.8,483.2 51.1,480.3 50.4,479.2 49.6,479.9 49.5,482.3 48.8,483 46.2,482.5 44.7,480.6 45.1,478.8 46.8,478.7 48.1,479.4 48.7,474.1 48.7,474.1 52.5,474.1 55.3,471.1 56.7,472.3 61,470.1 63.4,471.2 63.3,466.1 65.5,465.4 66,462.4 67.4,462.2 67,459.4 65.4,458.7 65.6,456.7 69.1,456.2 70.8,452.5 69.9,451.1 70.7,450 77.5,451.2 78.4,453.1 80,451.8 81.6,452.6 82,454.2 86.2,453.4 86.1,451.2 87.2,449.6 89.9,450 95.8,448.8 98.3,449.6 99.9,446.8 98.2,446.2 99.7,442.8 101.3,442.5 104.4,446.2 106.8,443.7 107.5,444.3 108.5,448.1";
	  case 'mk02':
	    return "49.8,429 47.5,428.2 47.2,432.3 43.4,431.2 39.9,432.3 40.7,433.3 36.7,434.3 33.9,433.8 31.5,435.9 30.6,434.7 26.6,434.3 25,429.9 23.3,428.4 20.2,430.6 20,426.7 18.1,428.2 16.4,428.3 14.7,426 14,425 12.8,425.7 13.5,429.2 15.1,430.9 14.7,432.1 13.7,431.3 12.8,429.3 11.7,429.4 11.1,430 12.1,431 12,432.2 10,432.6 10.1,433.5 12.4,434.9 12.2,435.6 11.7,435.9 11.4,436.7 11.8,438.1 11.8,440.1 12.6,441.3 12.6,444 14.2,448.3 16.4,450.2 17,453 18.7,452.8 19.4,449.6 22.5,448 23.5,448.5 22.4,451.1 21.3,451 20.2,452.5 20,453.7 22.5,453.1 25.7,453 26.9,454.2 26.9,455.4 25.8,455.3 25.3,455.9 26.9,457.4 28.2,456.6 28.8,457 28.5,460.1 29.7,460.2 31.2,461.6 36.8,460.5 37.7,459.8 39,460.8 36.8,464.3 36.8,465.8 39.2,465.7 40.6,467.1 44.1,466 49.4,461.9 50.2,463.3 49,464.9 45.8,468.7 46.4,471.9 47.4,472.5 48.8,473.3 48.7,474 52.5,473.9 55.3,470.9 56.7,472.1 61,470 63.4,471.1 63.3,466 65.5,465.2 66,462.2 67.4,462.1 67,459.2 65.4,458.6 65.6,456.5 69.1,456 70.8,452.3 69.9,450.9 70.7,449.9 66,448.3 60.6,444.2 57.7,445.7 54,443.7 53.8,441.9 54.9,441 53.6,439.6 53.8,437.5 56,437 57.2,434.2 55.4,433.1 55.4,431.9 54.3,432.1 54.4,430.5 51.6,431.1";
	  case 'mk04':
	    return "14.700 426.000, 15.700 423.900, 16.800 417.600, 17.900 418.400, 18.500 417.700, 18.400 416.700, 19.100 413.000, 17.600 409.400, 17.900 408.900, 18.600 408.700, 19.600 409.100, 20.400 409.000, 19.900 407.700, 18.200 406.800, 18.100 405.600, 19.200 405.600, 21.000 406.100, 21.000 405.400, 20.000 404.600, 18.900 402.500, 19.400 401.600, 20.200 401.700, 21.500 403.200, 22.500 403.200, 20.600 398.900, 20.600 395.000, 18.600 392.400, 19.000 391.500, 20.200 391.400, 20.300 390.700, 19.400 390.000, 18.800 386.500, 17.500 385.700, 17.200 384.600, 19.500 382.500, 24.100 382.000, 26.100 383.800, 31.100 384.700, 36.900 379.800, 38.700 379.800, 41.800 375.000, 44.100 374.900, 46.100 370.800, 48.800 372.200, 50.500 372.200, 50.500 376.700, 48.200 377.800, 48.100 381.700, 45.400 382.000, 44.000 384.300, 46.100 385.300, 46.100 387.400, 48.400 389.100, 49.300 392.400, 48.000 396.900, 46.000 396.300, 45.300 399.800, 47.000 401.400, 44.900 403.100, 43.500 407.400, 46.400 409.400, 46.000 411.400, 42.400 411.900, 41.000 412.900, 41.100 414.900, 43.100 419.700, 47.000 421.000, 48.300 419.600, 50.500 421.900, 49.500 425.500, 51.300 428.700, 49.800 428.900, 47.500 428.100, 47.200 432.100, 43.500 431.100, 40.000 432.200, 40.800 433.200, 36.800 434.200, 34.000 433.700, 31.600 435.800, 30.800 434.600, 26.800 434.200, 25.200 429.800, 23.500 428.200, 20.400 430.500, 20.200 426.600, 18.200 428.100, 16.500 428.200, 14.700 426.000, 14.700 426.000, 14.700 426.000";
	  case 'mk05':
	    return "98.2,431.8 102.4,429.3 102,423.7 99.8,422 98.1,422.8 98.6,421 94.9,419.5 94.5,411.7 95.8,412.4 107.4,411.3 109.7,402.9 113.2,401.3 115.1,402.2 117.5,398 120.3,399.3 123.4,404.1 127.8,405.9 126.3,409.9 125.7,414.7 127.2,415.7 127.3,417.6 129.4,419.6 130.7,419.8 130.9,422.1 129.5,422.9 128.3,426 125.2,428.2 121.9,428.2 121.3,430.1 122.2,432 122.9,435.4 121,435.3 120.2,436.8 122.6,437.9 121.4,440.1 121.5,442.6 123.6,444 123.9,446.3 124.5,446.6 124.3,448.7 122.3,449.8 120.4,448.1 117.4,448.7 117.3,446.7 115.3,448.1 114,447.9 109.8,449.2 108.5,448 108.5,448 107.5,444.2 106.8,443.5 104.4,446 101.3,442.3 99.7,442.7 98.2,440.8 99.7,439.5 97.1,436.3";
	  case 'mk06':
	    return "69.5,366.4 66.3,366 65.8,367.4 61.6,365.8 59.4,369.6 54.7,372.2 50.4,372.1 50.4,376.7 48.1,377.8 48,381.7 45.3,382 43.9,384.3 46,385.3 46,387.4 48.3,389.1 49.2,392.4 47.9,396.9 45.9,396.3 45.3,399.7 46.9,401.3 44.9,403.1 43.5,407.4 46.4,409.4 46,411.4 42.3,411.9 40.9,413 41.1,415 43,419.8 47,421.1 48.3,419.7 50.5,422 49.5,425.6 51.3,428.8 49.8,429 51.6,431.1 54.4,430.5 54.3,432.1 55.4,431.8 57,430.9 59.1,432.5 59.5,434 61.6,434 66.1,432.3 69.2,435.6 70,434.9 69.3,430 79.6,426.1 81,424.5 80.5,424 80.4,423 80.9,422.2 81.6,422.7 85.9,419.3 89.7,420.8 90.5,419 92.2,420.7 94.9,419.5 94.5,411.7 95.8,412.4 96,408.9 93.3,406.6 92.9,404.7 93.6,403.3 95,402.3 93.5,401.4 93.2,401.6 92,400.9 92.2,399.1 91.8,397.6 92.6,397.1 92.9,398 94,397.9 94,397 93,396.8 87.9,390.4 89.9,387.5 90.5,388.6 92.7,385.2 91.6,381.3 88.2,377.7 86.3,378.4 83.2,377.8 82.1,374.5 80.4,374.8 77.2,372.9 77.2,368.7 75.5,368 75.1,364.3 73.3,363.2";
	  case 'mk07':
	    return "85.9,419.3 81.6,422.7 80.9,422.2 80.4,423 80.5,424 81,424.5 79.6,426.1 69.3,430 70,434.9 69.2,435.6 66.1,432.3 61.6,434 59.5,434 59.1,432.5 57,430.9 55.4,431.8 55.4,433.1 57.2,434.2 56,437 53.8,437.5 53.6,439.6 54.9,441 53.8,441.9 54,443.7 57.7,445.7 60.6,444.2 66,448.3 70.7,449.9 77.5,451 78.4,452.9 80,451.7 81.6,452.5 82,454 86.2,453.2 86.1,451 87.2,449.5 89.9,449.8 95.8,448.6 98.3,449.5 99.9,446.6 98.2,446.1 99.7,442.7 98.2,440.8 99.7,439.5 97.1,436.3 98.2,431.8 102.4,429.3 102,423.7 99.8,422 98.1,422.8 98.6,421 94.9,419.5 92.2,420.7 90.5,419 89.7,420.8";
	  case 'mk08':
	    return "134.9,451.3 133.3,451.2 132.4,453 130.3,452.8 129.5,450.8 128.1,450.8 126.9,447.8 124.5,446.6 123.9,446.3 123.6,444 121.5,442.6 121.4,440.1 122.6,437.9 120.2,436.8 121,435.3 122.9,435.4 122.2,432 121.3,430.1 121.9,428.2 125.2,428.2 128.3,426 129.5,422.9 130.9,422.1 132.5,421.5 134.9,425.3 137.2,424.1 137.2,421.8 140.2,421.9 140.2,425.9 144.4,428 146.9,427.1 148.4,430.6 146,431.5 145.2,434.1 147.4,436.7 146.2,437.4 147.4,439.4 151.2,440.5 152.2,442.3 155.1,443.8 158.3,443.8 159.4,446 161.9,446.3 163,449.2 165.7,450.6 163.4,452.9 163.3,454.4 161.7,455.4 159.9,454.3 159.2,454.8 158.7,457.3 157.9,458.6 156.6,458.7 155.2,458.9 154.2,458.3 153.4,458.9 152.3,459.9 150.9,457.9 147.4,457.5 143.1,456.1 141.4,457.9 141.5,460.6 140.8,461.8 139.1,461.7 137.1,459.7 135.9,460.8 134.4,460.8 133.5,459.8 132.5,460.5 130.5,460.5 130.7,457 133.8,453.8 135.8,453.7";
	  case 'mk09':
	    return "158.3,443.8 155.1,443.8 152.2,442.3 151.2,440.5 147.4,439.4 146.2,437.4 147.4,436.7 145.2,434.1 146,431.5 148.4,430.6 146.9,427.1 150.1,426.4 149,424.2 149.9,422.5 147.3,419.6 144.5,420 141.7,418.3 142.7,416.8 145,417 145.5,416 151.2,416 154.8,418.1 158,416.8 162.9,417.8 170.4,417.2 174.2,412.5 175.3,409.7 177.4,411.3 183,411.3 183.7,408.8 188.3,409 192.9,407.5 195.7,402.8 199.4,401.5 200.2,399.1 213.6,391.9 213.2,392.4 211.4,397.4 206.9,401.6 203.9,407.9 200.1,410.6 199.2,413.3 193.5,422.9 186.9,427.4 184.5,428.4 181.7,433.3 181.3,436.5 178.3,437.2 172.5,442.2 171.4,445.1 165.7,450.6 163,449.2 161.9,446.3 159.4,446";
	  case 'mk10':
	    return "133.8,377.3 131.2,375.9 127.5,378.2 125.4,382.4 128.7,388.5 127.8,390 128.5,398.1 131.7,402.8 130.9,405.7 128.1,404.8 127.7,405.8 126.2,409.9 125.7,414.6 127.1,415.6 127.2,417.5 129.4,419.6 130.7,419.8 130.9,422.1 132.5,421.4 134.9,425.2 137.2,424.1 137.2,421.7 140.2,421.8 140.2,425.8 144.4,427.9 146.8,427.1 150.1,426.3 149,424.2 149.9,422.4 147.3,419.5 144.5,419.9 141.7,418.3 142.7,416.8 145,417 145.5,415.9 151.2,415.9 154.8,418.1 157.9,416.8 162.9,417.8 170.3,417.2 174.1,412.5 175.3,409.7 177.4,411.3 183,411.2 183.7,408.7 188.3,408.9 192.9,407.4 195.7,402.7 199.4,401.5 200.2,399.1 200.3,399.1 202.2,393.5 200.5,390.1 201.4,388.9 200.3,386.3 197.4,385 195.7,375.9 192.9,371.3 192.9,368.8 191.7,367.3 189.6,368.6 187.5,367.1 188.4,364.9 186.2,363.1 185.9,361.5 181.8,357.7 179.9,357.1 178.4,357.6 174.5,361.4 172.5,361.4 172.5,365.8 170.7,365.6 169.3,367.9 170.9,369.1 170,371.1 172.6,371 172.8,373.2 175.3,372.6 178.8,376.9 177.7,379.5 170.8,376.9 166.5,377.3 163.9,375 160.1,374.8 157.9,371 150.3,364.3 146.6,366.8 145,364.8 141.8,365.6 141,366.8 138.7,365.9 136.4,367.1 134.8,368.2 137.3,371 135.1,371.8";
	  case 'mk11':
	    return "177.3,351.2 179.2,350.7 179.8,348.9 183.6,350.5 186.3,346.7 183.7,343.1 186.9,340.8 182.1,338.3 178.6,331 177,329.5 179,325.8 179,322.6 176.7,321.2 176.1,315.7 177.1,314.2 175.8,313.2 175.2,308.4 172.9,308.2 169.9,305 168.3,308.8 162.3,301.8 153,295.9 145.4,295.3 138.9,292.9 133.7,294.6 126.3,301.5 127.4,312.8 126.1,313.6 123.7,320.4 122.7,324.3 124.3,326.5 124.8,334.4 127.8,338.7 126,339.9 127.5,341.3 126.2,343.3 121.8,343.9 128.1,351.7 129.9,351.3 132.6,355.4 133.3,359.6 130.4,362.8 130.4,364.1 133.8,366.2 135.4,366 136.4,367.1 138.7,365.9 141,366.8 141.8,365.6 145,364.8 146.6,366.8 150.3,364.3 157.9,371 160.1,374.8 163.9,375 166.5,377.3 170.8,376.9 177.7,379.5 178.8,376.9 175.3,372.6 172.8,373.2 172.6,371 170,371.1 170.9,369.1 169.3,367.9 170.7,365.6 172.5,365.8 172.5,361.4 174.5,361.4 178.4,357.6 179.9,357.1";
	  case 'mk12':
	    return "177.1,314.2 176.1,315.7 176.7,321.2 179,322.6 179,325.8 177,329.5 178.6,331 182.1,338.3 186.9,340.8 183.7,343.1 186.3,346.7 183.6,350.5 179.8,348.9 179.2,350.7 177.3,351.2 179.9,357.1 181.8,357.7 185.9,361.5 186.2,363.1 188.4,364.9 187.5,367.1 189.6,368.6 191.7,367.3 192.9,368.8 192.9,371.3 195.7,375.9 197.4,385 200.3,386.3 201.4,388.9 200.5,390.1 202.2,393.5 200.3,399.1 213.7,391.8 216.4,389 222.3,378.6 226.6,372 229.5,370.9 234.7,361.1 241,341.3 239.2,336.7 233.9,332.5 232.2,326.5 228.4,323.9 223.7,320.2 217,317.1 214.2,313.3 206.3,304.8 202.6,304.5 200.5,306.7 197.4,298.8 182.4,301.4 172.3,299.6 169.9,305 172.9,308.2 175.2,308.4 175.8,313.2";
	  case 'mk13':
	    return "83.2,377.8 86.3,378.4 88.2,377.7 91.6,381.3 92.7,385.2 90.5,388.6 89.9,387.5 87.9,390.4 93,396.8 94,397 94,397.9 92.9,398 92.6,397.1 91.8,397.6 92.2,399.1 92,400.9 93.2,401.6 93.5,401.4 95,402.3 93.6,403.3 92.9,404.7 93.3,406.6 96,408.9 95.8,412.4 107.4,411.3 109.7,402.9 113.2,401.3 115.1,402.2 117.5,398 120.3,399.3 123.4,404.1 127.8,405.9 128.1,404.8 130.9,405.7 131.7,402.8 128.5,398.2 127.8,390 128.7,388.6 125.4,382.5 127.5,378.2 131.2,376 133.8,377.3 135.1,371.8 137.3,371 134.8,368.3 136.4,367.2 135.4,366 133.8,366.2 130.4,364.1 130.4,362.8 133.4,359.7 132.6,355.4 130,351.3 128.1,351.7 121.9,343.9 126.3,343.3 127.5,341.3 126,339.9 127.8,338.7 124.8,334.4 124.3,326.5 122.7,324.3 123.7,320.4 119.1,320.5 117.8,317.6 116.3,316.4 112.8,316.4 105.8,311.6 103.6,312.6 102.6,318.6 99.9,318.9 98.1,319.2 94.5,323 94.1,333.5 90.7,332.7 86.7,334.2 85.8,334.8 84.3,336.9 85,342.6 87,345.3 85.6,346.3 89,355.5 88.1,356.7 89.3,358.2 88.4,364 85.1,364.1 84.2,365.7 80.2,365.2 77.2,368.7 77.2,372.9 80.4,374.8 82.1,374.5";
	  case 'mk14':
	    return "38.5,379.7 41.7,374.9 44,374.9 46,370.8 48.7,372.1 50.4,372.2 54.7,372.2 59.4,369.6 61.6,365.8 65.8,367.4 66.3,366 69.5,366.4 73.3,363.2 75.1,364.3 75.5,368 77.2,368.7 80.2,365.2 84.2,365.7 85.1,364.1 88.4,364 89.3,358.2 88.1,356.7 89,355.5 85.6,346.3 87,345.3 85,342.6 84.3,336.9 85.8,334.7 81.4,332.7 83.4,331.9 79.6,327.1 75.9,326 71.8,320.6 69.7,318 67,316.7 63.5,316.7 62.1,320.7 60.3,322.2 57.7,321.5 52.8,322.4 48.1,324.6 48.1,328.3 49.3,328.3 50.2,332.5 47.8,332.5 42.6,341.4 43,343.9 38.6,348.6 33.1,346.7 29.6,343.1 28.6,344.2 28.1,349.7 29.2,350.8 25.5,354.8 22.6,363.4 23.8,366.2 25.4,366.8 25.5,371 26.5,371.4 27.6,373 25.3,374.5 25.7,376.6 24.5,377.6 24,381.9 26,383.7 31,384.6 36.8,379.7";
	  case 'mk15':
	    return "67.3,309.2 69.4,307.8 71,309.2 73.6,309.1 74.8,307.7 69.3,303.3 67.7,304.6 66.8,303.2 63.3,304.9 58.4,301.2 57.5,302.5 55.4,296.6 54,298.7 52.5,299.7 52.9,302.1 52.7,303.9 50.9,305 50.6,306.3 49.6,306.8 48.2,308 48,308.7 46.7,309.7 46.1,312.2 45.1,310.9 44.1,311.5 43.4,314.7 42.2,314.7 41.7,315.5 42,316.7 42.8,317.5 44.6,321.6 44,323.2 42.3,323.2 41.1,325.5 39.2,326 34,324.1 30.3,325.7 28.6,325.7 27.8,323.5 26.6,324.8 26.5,328 25.3,329.6 25.5,330.8 26.9,332.1 27.4,333.2 26.6,333.5 25.3,333.2 24.3,333.5 22.8,332.5 22.1,333.6 23.7,334.8 24.4,336.2 24.2,338 22.6,339.5 22.8,341 22.2,341.7 20.5,341.9 20.4,341.1 18.7,341.6 18.3,344.3 17.5,345.3 15.8,345.2 15.6,345.9 16.6,347 16.4,348.3 15.5,349.2 14.7,350.1 14.3,353.2 14.8,353.8 15.9,353 16.6,353.6 16.8,354.5 15.3,357 15,359.8 15.7,360.5 14.8,364.1 15.7,365.6 19,365.7 18.9,366.8 17.4,368.8 17.4,370.5 19.6,371.4 19.8,372.6 18.1,374.5 18.1,376.2 17,378.1 15.9,382.2 17.1,384.1 17.2,384.5 19.4,382.4 24,381.9 24.5,377.6 25.7,376.6 25.3,374.5 27.6,373 26.5,371.4 25.5,371 25.4,366.8 23.8,366.2 22.6,363.4 25.5,354.8 29.2,350.8 28.1,349.7 28.6,344.2 29.6,343.1 33.1,346.7 38.6,348.6 43,343.9 42.6,341.4 47.8,332.5 50.2,332.5 49.3,328.3 48.1,328.3 48.1,324.6 52.8,322.4 57.7,321.5 60.3,322.2 62.1,320.7 63.5,316.7 67,316.7 69.7,318 71.8,320.6 73,316.8 69.9,311.2 68.7,311.6";
	  case 'mk16':
	    return "99.900 318.900, 90.700 307.600, 88.200 300.200, 86.000 299.300, 85.200 296.100, 83.600 295.300, 82.200 289.700, 73.500 284.000, 72.000 286.200, 71.800 289.700, 70.400 290.000, 68.600 288.300, 67.400 289.200, 67.200 296.100, 60.000 296.400, 59.100 297.700, 58.100 297.700, 57.200 296.600, 55.200 296.600, 55.100 296.700, 57.200 302.600, 58.100 301.300, 63.000 305.000, 66.500 303.300, 67.400 304.700, 69.000 303.500, 74.500 307.900, 73.200 309.300, 70.600 309.400, 69.000 308.100, 66.900 309.400, 68.300 311.800, 69.600 311.400, 72.700 317.000, 71.500 320.900, 75.600 326.200, 79.300 327.300, 83.100 332.100, 81.100 332.900, 85.500 335.000, 86.400 334.400, 90.300 332.900, 93.700 333.700, 94.100 323.300, 97.700 319.500, 99.900 318.900, 99.900 318.900, 99.900 318.900";
	  case 'mk17':
	    return "197.400 222.000, 198.200 219.200, 196.600 216.500, 200.800 213.700, 203.700 213.400, 202.400 204.200, 198.000 191.600, 194.300 186.100, 191.500 178.500, 184.700 179.400, 173.600 176.800, 173.700 179.300, 171.500 180.200, 170.800 182.900, 172.700 187.000, 175.500 188.200, 174.800 192.900, 173.400 193.100, 173.400 195.700, 175.300 197.100, 175.400 199.600, 174.600 200.300, 171.900 199.500, 169.200 200.800, 171.400 204.100, 171.200 207.000, 166.700 208.900, 156.600 207.300, 154.500 202.100, 153.000 202.800, 151.000 201.900, 144.600 212.300, 139.900 213.900, 126.100 212.700, 125.600 208.200, 118.600 212.600, 110.600 212.100, 110.100 214.300, 106.900 215.900, 104.700 218.100, 105.000 218.400, 105.100 220.400, 106.200 220.400, 106.900 219.800, 109.700 224.800, 109.600 226.700, 108.400 228.000, 108.400 230.200, 107.500 231.400, 108.300 232.900, 108.300 237.600, 107.000 239.300, 107.700 240.700, 109.600 241.800, 110.400 243.300, 110.900 246.400, 112.300 247.800, 112.200 248.700, 111.200 248.700, 109.000 247.000, 107.000 246.800, 106.600 247.800, 106.800 249.100, 109.700 252.000, 110.300 253.800, 109.500 254.500, 108.100 254.400, 107.800 252.800, 104.900 251.100, 102.200 251.100, 100.800 252.200, 97.600 252.200, 96.500 253.200, 95.900 254.400, 94.000 254.600, 93.200 258.600, 90.300 260.600, 88.800 267.100, 86.900 268.600, 86.800 269.600, 84.200 271.300, 81.200 274.600, 80.800 275.700, 79.600 277.600, 79.600 279.800, 78.700 280.300, 77.600 279.500, 76.300 281.500, 75.200 282.400, 74.100 284.100, 82.800 289.900, 84.200 295.500, 85.800 296.300, 86.600 299.500, 88.800 300.400, 91.300 307.800, 100.600 319.100, 103.200 318.800, 104.200 312.800, 106.400 311.900, 113.400 316.700, 116.900 316.700, 118.300 317.900, 119.600 320.700, 124.200 320.700, 126.600 313.900, 127.800 313.100, 126.700 301.800, 134.200 294.900, 139.400 293.200, 137.800 291.200, 137.800 280.700, 135.500 279.100, 133.700 279.300, 131.500 277.400, 131.800 275.300, 130.700 272.800, 128.700 271.500, 132.500 267.700, 134.500 267.100, 135.200 264.700, 139.500 262.600, 141.000 258.300, 144.900 256.500, 145.000 255.400, 149.600 256.400, 150.500 254.100, 150.100 248.000, 147.500 245.900, 149.400 242.800, 153.600 242.800, 155.800 241.200, 158.200 241.500, 160.300 243.000, 161.200 237.400, 163.400 236.000, 174.200 234.100, 174.700 229.100, 180.800 226.200, 182.100 227.300, 184.300 226.600, 186.200 222.600, 187.100 223.400, 192.300 223.600, 197.400 222.000, 197.400 222.000, 197.400 222.000, 197.400 222.000";
      case 'mk18':
	    return "168.3,308.8 172.3,299.5 182.4,301.4 197.4,298.7 200.6,306.7 202.6,304.5 206.4,304.8 206.1,304.5 210.9,301.1 216.1,287.7 214.5,280.3 206.4,274.8 204,268.5 204,265.1 205.7,263.7 205.8,260.7 204.2,258.7 204.9,256.3 197.3,254.8 195.1,246.2 195.9,243.2 198.8,242.2 199.9,239.9 198.8,238.5 200.1,235.9 198.9,234.4 195,234.1 196.6,228.5 196.9,223.7 197.5,221.9 191.9,223.1 186.7,222.8 185.8,222.1 183.9,226.1 181.7,226.7 180.4,225.7 174.3,228.6 173.8,233.6 162.9,235.6 160.7,236.9 159.8,242.5 157.6,241.1 155.2,240.8 153.1,242.4 148.9,242.4 147,245.5 149.5,247.6 149.9,253.8 149.1,256.1 144.5,255 144.4,256.1 140.5,258 139,262.3 134.7,264.4 134,266.8 132,267.4 128.2,271.2 130.2,272.5 131.3,275 131,277.1 133.2,279 134.9,278.8 137.3,280.3 137.3,290.8 138.9,292.9 145.4,295.3 153,295.9 162.3,301.8";
      case 'mk19':
	    return "106.7,216.2 109.9,214.5 110.4,212.3 118.4,212.7 125.3,208.4 125.9,212.8 139.6,214 144.3,212.5 150.7,202.1 152.7,203 154.3,202.3 156.3,207.4 166.5,209 170.9,207.1 171.1,204.2 168.9,200.9 171.6,199.6 174.3,200.3 175.2,199.7 175.1,197.1 173.2,195.8 173.3,193.2 174.7,193 175.4,188.3 172.6,187.1 170.7,183 171.4,180.3 173.7,179.4 173.6,176.9 184.7,179.5 191.5,178.6 189.7,173.8 180.1,157.5 181.2,153.8 195.9,126.2 196.5,119.5 189.5,114.3 182.4,99.8 171.6,95.4 167.9,80.1 172.2,72.3 173.2,65.3 172,63.3 167.1,63.3 175.2,56.5 173.6,51.1 174.1,46 181.9,35.9 177.5,24.7 164.4,18.3 164.1,15.4 160.1,12.9 156,7.1 153.6,8.6 151.3,7.8 149.7,10.2 143.3,15.2 135.9,13.3 131.7,14.8 129.1,21 124.7,24.9 122.5,28.3 123.3,30.7 121.9,33.3 119.2,49 119.8,58.3 118.3,63.6 115.2,62.8 112.4,64.5 108.7,70 109.1,75.4 106.5,75.4 105.6,77.2 102,72.8 95.4,69.9 89.2,65.3 86.1,67 84.4,69.9 80.3,71.4 75.9,73.3 74.9,71.2 70.1,70.7 65.5,67.4 62.8,68.5 63.1,63.3 52.6,42 46.4,39.9 42.6,41.8 40,44.9 41.5,48.9 40.7,51.6 35.8,47.8 32.3,51.2 36.8,57 37.1,60.9 40.5,61.8 45.4,72 48.9,73.1 50.2,76.4 53.5,78 54.9,81.9 59.8,83 66.3,86 73.3,92.5 73.3,96.8 74.3,99.4 76.4,99.1 77.3,103.3 81.3,107.5 79.6,109.4 78.3,111.6 78.3,114.4 78.5,122.9 76.2,128.7 77.9,131.9 82.1,132.6 81,134.9 81.8,137.7 78.3,139.5 78.1,144.2 85.2,160.7 82.6,163.6 82.1,172.1 79.4,174.4 78.7,176.7 77.8,179.5 78.4,182 77.8,183.8 78.9,189.6 82,192.5 82.1,195.6 84.6,199.7 84.9,202.7 86.4,206.8 86.4,210.1 88.1,209.9 89.2,208 90.7,209.8 93.8,210.9 94.8,212.4 93.7,214.7 94.5,215.6 96,214.6 96.6,216.5 97.9,216.4 98.9,215.6 101,215.9 102.2,217.5 103.6,217.3 104.5,218.3 104.5,218.4";
  	  default:
        return "";
      }
    }

    // Funktio visualisoinnin päivittämiseksi valitun vuoden perusteella
    function updateYear() {
      const selectedYear = +document.getElementById('yearSlider').value;
      currentYear = selectedYear;
      document.getElementById('currentYearDisplay').innerText = `Current Year: ${currentYear + 1987}`;

      // Päivitä kartta tässä käyttäen valittua vuotta ja työpaikkatietoja
      const currentData = tyopaikatData.find(item => item.vuosi === currentYear + 1987);
      const stableData = tyopaikatData.find(item => item.vuosi === 1987);
      
      if (currentData) {
        for (const key in currentData) {
          if (key !== 'vuosi' && key !== 'sukupuoli' && key !== 'sektori') {
            //const colorIndex = Math.floor((currentData[key] - stableData[key])/stableData[key]*10); // Jaa työpaikat 10 lohkoon
            const colorIndex = Math.floor((currentData[key] - stableData[key])/stableData[key]*100); // Jaa työpaikat 10 
var ci = colorIndex;
var vcolorIndex;

if (ci < 0) {
  vcolorIndex = 110;
  if (ci < -10) vcolorIndex = 90;
  if (ci < -20) vcolorIndex = 70;
  if (ci < -30) vcolorIndex = 50;
  if (ci < -40) vcolorIndex = 30;
  if (ci < -50) vcolorIndex = 10;
  
  
} else {
  if (ci > 0) vcolorIndex = 130;
  if (ci > 10) vcolorIndex = 150;
  if (ci > 20) vcolorIndex = 170;
  if (ci > 30) vcolorIndex = 190;
  if (ci > 40) vcolorIndex = 210;
  if (ci > 50) vcolorIndex = 230;
}			
			console.log(colorIndex,vcolorIndex);
            //const rgbColor = `rgb(${varisavyt[vcolorIndex]}, 182, 252)`;
			const rgbColor = `rgb(${vcolorIndex}, 182, 252)`;
            const index = vdata.findIndex(item => item.id === key);
            //console.log(index);
            if (index !== -1) {
              vdata[index].color = rgbColor;
            }
          }
        }
        updateMap(); // Päivitä kartta
        console.log(vdata);
      }
    }

    // Liitä updateYear-funktio sliderin input-tapahtumaan
    document.getElementById('yearSlider').addEventListener('input', updateYear);

    // Aseta intervali automaattiselle etenemiselle
    const intervalId = setInterval(autoProgressSlider, 500); // Säädä intervalia tarpeen mukaan

    // Alustava päivitys näyttämään ensimmäisen vuoden tiedot
    updateYear();

    // Automaattisen etenemisen funktio
    function autoProgressSlider() {
      currentYear++;
      if (currentYear > 35) { // Tämä muutos vastaa vuosien määrää työpaikatData-taulukossa
        currentYear = 0;
      }
      document.getElementById('yearSlider').value = currentYear;
      updateYear(); // Päivitä visualisointi
    }

    // Lisätty funktio kartan päivittämiseksi
    function updateMap() {
      svg.selectAll(".polygon")
        .data(vdata)
        .style("fill", d => d.color);
    }
  </script>
</body>
</html>