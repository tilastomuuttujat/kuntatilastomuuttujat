<!doctype html>
<html>
<head>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
<link rel="stylesheet" type="text/css" href="multi.min.css">
<script src="multi.min.js"></script>
<link rel="stylesheet" href="rsSliderLens.css" />
<script src="jquery.rsSliderLens.js"></script>
<script>$(document).ready(function() {$('select').multi({search_placeholder: 'Hae muuttuja...',});});</script>
<style>
.container {
  font: 12px sans-serif;
  box-sizing: border-box;
  margin: 10px auto;
  max-width: 1000px;
  padding: 0 ppx;
  width: 100%;
      }
h2 { color:#fff;}

.link {
  stroke: white;
  stroke-width: 1px;
}
.licensing {
  fill: none;
}
.suit {
  fill: #0772A1;
}
.resolved {
  fill: #FF8700;
}
.node {
  fill: lightgray;
  stroke: black;
  stroke-width: 1px;
}
text {
  font: 10px sans-serif;
  pointer-events: none;
  text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;
}
h6 { color: #7c795d; font-family: 'Source Sans Pro', sans-serif; font-size: 16px; font-weight: 400; line-height: 24px; margin: 0 0 24px; }

</style>

</head>
<body>
    <div class="container">
    <select multiple="multiple" name="statistical_areas" id="area_select" onChange="valinnat($(this).val())">
    <option value="51">1. desiilin palkat</option>
    <option value="507">1. tulokymmenys</option>
    <option value="508">2. tulokymmenys</option>
    <option value="509">3. tulokymmenys</option>
    <option value="510">4. tulokymmenys</option>
    <option value="511">5. tulokymmenys</option>
    <option value="512">6. tulokymmenys</option>
    <option value="513">7. tulokymmenys</option>
    <option value="514">8. tulokymmenys</option>
    <option value="52">9. desiilin palkat</option>
    <option value="515">9. tulokymmenys</option>
    <option value="516">10. tulokymmenys</option>
    <option value="48">I (pienituloisin 10 %)</option>
    <option value="48a">II-tulodesiili</option>
    <option value="48b">III-tulodesiili</option>
    <option value="48c">IV-tulodesiili</option>
    <option value="49">V (keskituloisin 10 %)</option>
    <option value="49a">VI-tulodesiili</option>
    <option value="49b">VII-tulodesiili</option>
    <option value="49c">VIII-tulodesiili</option>
    <option value="47a">IX-tulodesiili</option>
    <option value="47">X (suurituloisin 10 %)</option> 
    <option value="277">Ahtaasti asuvia asuntokuntia</option>
    <option value="5">Aikuisten mielenterveyden avohoitokäynnit</option>
    <option value="129">Alkoholin myynti asukasta kohden</option>
    <option value="204">Alkutuotannon työpaikkojen osuus, %</option>
    <option value="30a">Alkutuotannon työlliset</option>
    <option value="229">Alueella työssä käyvät, SOTE / 10 000 asukasta</option>
    <option value="32">Alueen SOTE -työlliset</option>
    <option value="420">Ansiosidonnainen päiväraha 60-64-vuotiaat</option>
    <option value="395">Ansiotulot keskimäärin, euroa</option>
    <option value="203">Asuinkunnassaan työssäkäyvien osuus, %</option>
    <option value="31">Asuinkunnassaan työssäkäyvät</option>
    <option value="544">Asukasluku</option>
    <option value="378">Asumisen tuet, keskiarvo</option>
    <option value="262">Asuntokunnan koko (1 henkilö)</option>
    <option value="263">Asuntokunnan koko (2 henkilöä)</option>
    <option value="264">Asuntokunnan koko (3 henkilöä)</option>
    <option value="265">Asuntokunnan koko (4+ henkilöä)</option>
    <option value="562">Asuntokuntaväestö tulokymmenyksessä, henkilöä pienituloisin 10 %</option>
    <option value="563">Asuntokuntaväestö tulokymmenyksessä, henkilöä keskituloisin 10 %</option>
    <option value="564">Asuntokuntaväestö tulokymmenyksessä, henkilöä suurituloisin 10 %</option>
    <option value="399">Asuntovelat, euroa</option>
    <option value="197">Avioeroja 25-64 vuotiaat</option>
    <option value="317">Avioerot</option>
    <option value="6">Avioliiton solmineet miehet 20-24</option>
    <option value="70">Avioliiton solmineet miehet 20-39</option>
    <option value="189">Avioliiton solmineet miehet 25-29</option>
    <option value="193">Avioliiton solmineet miehet 30-34</option>
    <option value="40">Avioliiton solmineet naiset 20-24</option>
    <option value="71">Avioliiton solmineet naiset 20-39</option>
    <option value="192">Avioliiton solmineet naiset 25-29</option>
    <option value="194">Avioliiton solmineet naiset 30-34</option>
    <option value="310">Avioliitosta eronneet miehet 20-39-vuotiaat</option>
    <option value="311">Avioliitosta eronneet naiset 20-39-vuotiaat</option>
    <option value="312">Avioliitosta eronneet miehet yhteensä</option>
    <option value="313">Avioliitosta eronneet naiset yhteensä</option>
    <option value="63">Aviopari ja lapsia</option>
    <option value="63a">Aviopari ja alle 3-v. lapsia</option>
    <option value="63b">Aviopari ja alle 7-v. lapsia</option>
    <option value="63c">Avioparit, joilla yli 4 alle 18v. lasta</option>
    <option value="63d">Avioparit, joilla yli 3 alle 7v. lasta</option>
    <option value="62">Avopari ja lapsia</option>
    <option value="62a">Avopari ja alle 3-v. lapsia</option>
    <option value="62b">Avopari ja alle 7-v. lapsia</option>
    <option value="62c">Avoparit, joilla yli 4 alle 18v. lasta</option>
    <option value="62d">Avoparit, joilla yli 3 alle 7v. lasta</option>
    <option value="74">Eduskuntavaalit keskustan kannatus</option>
    <option value="75">Eduskuntavaalit oikeiston kannatus</option>
    <option value="73">Eduskuntavaalit vasemmiston kannatus</option>
    <option value="12">Ei perusasteen jälkeistä tutkintoa, 20+ -vuotiaat miehet</option>
    <option value="13">Ei perusasteen jälkeistä tutkintoa, 20+ -vuotiaat naiset</option>
    <option value="268">Ei perusasteen jälkeistä tutkintoa, miehet 1980-1984</option>
    <option value="266">Ei perusasteen jälkeistä tutkintoa, miehet 1985-1989</option>
    <option value="270">Ei perusasteen jälkeistä tutkintoa, miehet 1990-1994</option>
    <option value="269">Ei perusasteen jälkeistä tutkintoa, naiset 1980-1984</option>
    <option value="267">Ei perusasteen jälkeistä tutkintoa, naiset 1985-1989</option>
    <option value="271">Ei perusasteen jälkeistä tutkintoa, naiset 1990-1994</option>
    <option value="190">Ei yhtään läheistä ystävää % 8. ja 9.</option>
    <option value="400">Elinkeinotoiminnan ja tulolähteen velat, euroa</option>
    <option value="84">Eläkeläiset</option>
    <option value="8">Erikoissairaanhoidon nettokäyttökustannukset</option>
    <option value="419">Erityistä tukea saaneet peruskoulun oppilaat</option>
    <option value="422">Esiopetusoppilaat koulun yhteydessä</option>
    <option value="421">Esiopetusoppilaat päivähoidon yhteydessä</option>
    <option value="117">Eurovaalit keskustan kannatus</option>
    <option value="118">Eurovaalit oikeiston kannatus</option>
    <option value="97">Eurovaalit vasemmiston kannatus</option>
    <option value="505">Eurovaalit äänestysprosentti miehet</option>
    <option value="506">Eurovaalit äänestysprosentti naiset</option>
    <option value="237">Gini-kerroin, bruttotulot</option>
    <option value="239">Gini-kerroin, käytettävissä olevat rahatulot</option>
    <option value="383">Gini-kerroin, tuotannontekijätulot</option>
    <option value="128">Hedelmällisyys</option>
    <option value="496">Hedelmällisyys 15-19</option>
    <option value="497">Hedelmällisyys 20-24</option>
    <option value="498">Hedelmällisyys 25-20</option>
    <option value="499">Hedelmällisyys 30-34</option>
    <option value="500">Hedelmällisyys 35-39</option>
    <option value="501">Hedelmällisyys 40-44</option>
    <option value="502">Hedelmällisyys 45-49</option>
    <option value="11">Henkilöautot</option>
    <option value="141">Henkilöstökulut</option>
    <option value="404">Huumausainerikos, miehet</option>
    <option value="405">Huumausainerikos, naiset</option>
    <option value="21">Informaatiosektorin työpaikat</option>
    <option value="423">Ilman perusasteen jälkeistä tutkintoa miehet 20-24</option>
    <option value="429">Ilman perusasteen jälkeistä tutkintoa miehet 25-29</option>
    <option value="435">Ilman perusasteen jälkeistä tutkintoa miehet 30-34</option>
    <option value="441">Ilman perusasteen jälkeistä tutkintoa miehet 35-39</option>
    <option value="447">Ilman perusasteen jälkeistä tutkintoa miehet 40-44</option>
    <option value="454">Ilman perusasteen jälkeistä tutkintoa miehet 45-49</option>
    <option value="460">Ilman perusasteen jälkeistä tutkintoa miehet 50-54</option>
    <option value="466">Ilman perusasteen jälkeistä tutkintoa miehet 55-59</option>
    <option value="472">Ilman perusasteen jälkeistä tutkintoa miehet 60-64</option>
    <option value="478">Ilman perusasteen jälkeistä tutkintoa miehet 65-69</option>
    <option value="484">Ilman perusasteen jälkeistä tutkintoa miehet 70-74</option>
    <option value="490">Ilman perusasteen jälkeistä tutkintoa miehet 75-</option>
    <option value="426">Ilman perusasteen jälkeistä tutkintoa naiset 20-24</option>
    <option value="432">Ilman perusasteen jälkeistä tutkintoa naiset 25-29</option>
    <option value="438">Ilman perusasteen jälkeistä tutkintoa naiset 30-34</option>
    <option value="444">Ilman perusasteen jälkeistä tutkintoa naiset 35-39</option>
    <option value="450">Ilman perusasteen jälkeistä tutkintoa naiset 40-44</option>
    <option value="457">Ilman perusasteen jälkeistä tutkintoa naiset 45-49</option>
    <option value="463">Ilman perusasteen jälkeistä tutkintoa naiset 50-54</option>
    <option value="469">Ilman perusasteen jälkeistä tutkintoa naiset 55-59</option>
    <option value="475">Ilman perusasteen jälkeistä tutkintoa naiset 60-64</option>
    <option value="481">Ilman perusasteen jälkeistä tutkintoa naiset 65-69</option>
    <option value="487">Ilman perusasteen jälkeistä tutkintoa naiset 70-74</option>
    <option value="493">Ilman perusasteen jälkeistä tutkintoa naiset 75-</option> 
    <option value="65">Isä ja lapsia</option>
    <option value="65a">Isä ja alle 3-v. lapsia</option>
    <option value="65b">Isä ja alle 7-v. lapsia</option>
    <option value="403">Itsemurhan tutkinta</option>
    <option value="205">Jalostuksen työpaikkojen osuus, %</option>
    <option value="30b">Jalostuksen työlliset</option>
    <option value="210">Julkinen hallinto, Koulutus, SOTE-palvelut työpaikat % </option>
    <option value="61">Kahden vanhemman perheet, lapset 0-17</option>
    <option value="22">Kaupan työpaikat</option>
    <option value="230">Kaupan työpaikkojen osuus kaikista työpaikoista, %</option>
    <option value="82">Käytettävissä oleva mediaanirahatulo</option>
    <option value="81">Kelan maksamat tuet</option>
    <option value="213">Kelan sairastavuusindeksi</option>
    <option value="417">Kerrostalokauppojen lukumäärä</option>
    <option value="416">Kerrostalot neliöhinta (EUR/m2)</option>
    <option value="418">Kesämökkejä (lkm)</option>
    <option value="557">Kiinteistövero</option>
    <option value="245">Kohtalainen tai vaikea ahdistuneisuus, % 8. ja 9. luokan oppilaista</option>
    <option value="243">Kokee terveydentilansa keskinkertaiseksi tai huonoksi, % 8. ja 9. luokan oppilaista</option>
    <option value="387">Kokonaan perusturvan varassa</option>
    <option value="388">Kokonaan perusturvan varassa, lapsia</option>
    <option value="16">Korkea-asteen tutkinnon suorittaneet, 20+ -vuotiaat miehet</option>
    <option value="17">Korkea-asteen tutkinnon suorittaneet, 20+ -vuotiaat naiset</option>
    <option value="425">Korkea-asteen tutkinto miehet 20-24</option>
    <option value="431">Korkea-asteen tutkinto miehet 25-29</option>
    <option value="437">Korkea-asteen tutkinto miehet 30-34</option>
    <option value="443">Korkea-asteen tutkinto miehet 35-39</option>
    <option value="449">Korkea-asteen tutkinto miehet 40-44</option>
    <option value="456">Korkea-asteen tutkinto miehet 45-49</option>
    <option value="462">Korkea-asteen tutkinto miehet 50-54</option>
    <option value="468">Korkea-asteen tutkinto miehet 55-59</option>
    <option value="474">Korkea-asteen tutkinto miehet 60-64</option>
    <option value="480">Korkea-asteen tutkinto miehet 65-69</option>
    <option value="486">Korkea-asteen tutkinto miehet 70-74</option>
    <option value="492">Korkea-asteen tutkinto miehet 75-</option>
    <option value="428">Korkea-asteen tutkinto naiset 20-24</option>
    <option value="434">Korkea-asteen tutkinto naiset 25-29</option>
    <option value="440">Korkea-asteen tutkinto naiset 30-34</option>
    <option value="446">Korkea-asteen tutkinto naiset 35-39</option>
    <option value="452">Korkea-asteen tutkinto naiset 40-44</option>
    <option value="459">Korkea-asteen tutkinto naiset 45-49</option>
    <option value="465">Korkea-asteen tutkinto naiset 50-54</option>
    <option value="471">Korkea-asteen tutkinto naiset 55-59</option>
    <option value="477">Korkea-asteen tutkinto naiset 60-64</option>
    <option value="483">Korkea-asteen tutkinto naiset 65-69</option>
    <option value="489">Korkea-asteen tutkinto naiset 70-74</option>
    <option value="495">Korkea-asteen tutkinto naiset 75-</option>
    <option value="7">Kotimaiset kielet yhteensä</option>
    <option value="135">Koulukiusattuna</option>
    <option value="244">Koulukiusattuna vähintään kerran viikossa, % 8. ja 9. luokan oppilaista</option>
    <option value="136">Koulukiusaajana</option>
    <option value="23">Koulutuksen työpaikat</option>
    <option value="231">Koulutuksen työpaikkojen osuus kaikista työpaikoista, %</option>
    <option value="83">Koulutustasomittain</option>
    <option value="518">Koulutustasomittain miehet 20-24-vuotiaat</option>
    <option value="520">Koulutustasomittain miehet 25-29-vuotiaat</option>
    <option value="522">Koulutustasomittain miehet 30-34-vuotiaat</option>
    <option value="524">Koulutustasomittain miehet 35-39-vuotiaat</option>
    <option value="526">Koulutustasomittain miehet 40-44-vuotiaat</option>
    <option value="528">Koulutustasomittain miehet 45-49-vuotiaat</option>
    <option value="530">Koulutustasomittain miehet 50-54-vuotiaat</option>
    <option value="532">Koulutustasomittain miehet 55-59-vuotiaat</option>
    <option value="534">Koulutustasomittain miehet 60-64-vuotiaat</option>
    <option value="536">Koulutustasomittain miehet 65-69-vuotiaat</option>
    <option value="538">Koulutustasomittain miehet 70-74-vuotiaat</option>
    <option value="540">Koulutustasomittain miehet yli 75-vuotiaat</option>
    <option value="542">Koulutustasomittain miehet yhteensä</option>
    <option value="519">Koulutustasomittain naiset 20-24-vuotiaat</option>
    <option value="521">Koulutustasomittain naiset 25-29-vuotiaat</option>
    <option value="523">Koulutustasomittain naiset 30-34-vuotiaat</option>
    <option value="525">Koulutustasomittain naiset 35-39-vuotiaat</option>
    <option value="527">Koulutustasomittain naiset 40-44-vuotiaat</option>
    <option value="529">Koulutustasomittain naiset 45-49-vuotiaat</option>
    <option value="531">Koulutustasomittain naiset 50-54-vuotiaat</option>
    <option value="533">Koulutustasomittain naiset 55-59-vuotiaat</option>
    <option value="535">Koulutustasomittain naiset 60-64-vuotiaat</option>
    <option value="537">Koulutustasomittain naiset 60-64-vuotiaat</option>
    <option value="539">Koulutustasomittain naiset 70-74-vuotiaat</option>
    <option value="541">Koulutustasomittain naiset yli 75-vuotiaat</option>
    <option value="543">Koulutustasomittain naiset yhteensä</option>
    <option value="554">Kumulat yli-/alijäämä</option>
    <option value="77">Kunnallisvaalit keskustan kannatus</option>
    <option value="78">Kunnallisvaalit oikeiston kannatus</option>
    <option value="76">Kunnallisvaalit vasemmiston kannatus</option>
    <option value="503">Kunnallisvaalit äänestysprosentti miehet</option>
    <option value="504">Kunnallisvaalit äänestysprosentti naiset</option>
    <option value="107">Kunnallisveroprosentti</option>
    <option value="109">Kunnallisvero keskimäärin, euroa</option>
    <option value="555">Kunnallisvero</option>
    <option value="209">Kunnan varhaiskasvatus % 1-6</option>
    <option value="142">Kunnan verotulot</option>
    <option value="61a">Kunta ja valtio työllistäjänä</option>
    <option value="85">Kuntien välinen lähtömuutto</option>
    <option value="214">Kuntien välinen lähtömuutto,  20-39 -vuotiaat</option>
    <option value="215">Kuntien välinen lähtömuutto,  40-59 -vuotiaat</option>
    <option value="139">Kuntien välinen lähtömuutto kotimaiset kielet</option>
    <option value="140">Kuntien välinen lähtömuutto vieraskieliset</option>
    <option value="86">Kuntien välinen tulomuutto</option>
    <option value="216">Kuntien välinen tulomuutto,  20-39 -vuotiaat</option>
    <option value="220">Kuntien välinen tulomuutto,  40-59 -vuotiaat</option>
    <option value="137">Kuntien välinen tulomuutto kotimaiset kielet</option>
    <option value="138">Kuntien välinen tulomuutto vieraskieliset</option>
    <option value="114">Kuntouttava työtoiminta</option>
    <option value="10">Kuntoutuspalvelukustannukset</option>
    <option value="103">Kuollutta / 1000 asukasta</option>
    <option value="381">Käytettävissä oleva rahantulo, keskiarvo</option>
    <option value="382">Käytettävissä oleva rahatulo, mediaani</option>
    <option value="559">Lainakanta</option>
    <option value="89">Lapsen kotihoidon tuki</option>
    <option value="217">Lapsen kotihoidon tuki miehet</option>
    <option value="218">Lapsen kotihoidon tuki naiset</option>
    <option value="88">Lapsilisät</option>
    <option value="238">Lapsiperheet %</option>
    <option value="377">Lapsiperheiden etuudet, keskiarvo</option>
    <option value="188">Lasten pienituloisuusaste</option>
    <option value="87">Lastenhoidon tuet</option>
    <option value="56">Liikkeen- ja ammatinharjoittajan tulo</option>
    <option value="105">Maahanmuuttaneet</option>
    <option value="314">Maahanmuutto Suomeen</option>
    <option value="106">Maastamuuttaneet</option>
    <option value="315">Maastamuutto Suomesta</option>
    <option value="54">Maatalouden jaettava tulo</option>
    <option value="145">Maatalousmaan arvo</option>
    <option value="517">Maatilayritysten tulot</option></option>
    <option value="93">Maksetut tulonsiirrot, keskiarvo</option>
    <option value="50">Mediaanipalkka</option>
    <option value="55">Metsätalouden tulo</option>
    <option value="146">Metsämaan arvo</option>
    <option value="320">Miehet naimaton 20-29-vuotiaat</option>
    <option value="321">Miehet naimisissa 20-29-vuotiaat</option>
    <option value="322">Miehet eronneet 20-29-vuotiaat</option>
    <option value="323">Miehet naimaton kotimaiset kielet 20-29-vuotiaat</option>
    <option value="324">Miehet naimisissa kotimaiset kielet 20-29-vuotiaat</option>
    <option value="325">Miehet eronneet kotimaiset kielet 20-29-vuotiaat</option>
    <option value="326">Miehet naimaton vieraskieliset 20-29-vuotiaat</option>
    <option value="327">Miehet naimisissa vieraskieliset 20-29-vuotiaat</option>
    <option value="328">Miehet eronneet vieraskieliset 20-29-vuotiaat</option>   
    <option value="338">Miehet naimaton 30-39-vuotiaat</option>
    <option value="339">Miehet naimisissa 30-39-vuotiaat</option>
    <option value="340">Miehet eronneet 30-39-vuotiaat</option>
    <option value="341">Miehet naimaton kotimaiset kielet 30-39-vuotiaat</option>
    <option value="342">Miehet naimisissa kotimaiset kielet 30-39-vuotiaat</option>
    <option value="343">Miehet eronneet kotimaiset kielet 30-39-vuotiaat</option>
    <option value="344">Miehet naimaton vieraskieliset 30-39-vuotiaat</option>
    <option value="345">Miehet naimisissa vieraskieliset 30-39-vuotiaat</option>
    <option value="346">Miehet eronneet vieraskieliset 30-39-vuotiaat</option>
    <option value="356">Miehet naimaton 40-49-vuotiaat</option>
    <option value="357">Miehet naimisissa 40-49-vuotiaat</option>
    <option value="358">Miehet eronneet 40-49-vuotiaat</option>
    <option value="359">Miehet naimaton kotimaiset kielet 40-49-vuotiaat</option>
    <option value="360">Miehet naimisissa kotimaiset kielet 40-49-vuotiaat</option>
    <option value="361">Miehet eronneet kotimaiset kielet 40-49-vuotiaat</option>
    <option value="362">Miehet naimaton vieraskieliset 40-49-vuotiaat</option>
    <option value="363">Miehet naimisissa vieraskieliset 40-49-vuotiaat</option>
    <option value="364">Miehet eronneet vieraskieliset 40-49-vuotiaat</option>
    <option value="549">Muut tulot</option>
    <option value="68">MYEL-työtulo</option>
    <option value="329">Naiset naimaton 20-29-vuotiaat</option>
    <option value="330">Naiset naimisissa 20-29-vuotiaat</option>
    <option value="331">Naiset eronneet 20-29-vuotiaat</option>
    <option value="332">Naiset naimaton kotimaiset kielet 20-29-vuotiaat</option>
    <option value="333">Naiset naimisissa kotimaiset kielet 20-29-vuotiaat</option>
    <option value="334">Naiset eronneet kotimaiset kielet 20-29-vuotiaat</option>
    <option value="335">Naiset naimaton vieraskieliset 20-29-vuotiaat</option>
    <option value="336">Naiset naimisissa vieraskieliset 20-29-vuotiaat</option>
    <option value="337">Naiset eronneet vieraskieliset 20-29-vuotiaat</option>
    <option value="347">Naiset naimaton 30-39-vuotiaat</option>
    <option value="348">Naiset naimisissa 30-39-vuotiaat</option>
    <option value="349">Naiset eronneet 30-39-vuotiaat</option>
    <option value="350">Naiset naimaton kotimaiset kielet 30-39-vuotiaat</option>
    <option value="351">Naiset naimisissa kotimaiset kielet 30-39-vuotiaat</option>
    <option value="352">Naiset eronneet kotimaiset kielet 30-39-vuotiaat</option>
    <option value="353">Naiset naimaton vieraskieliset 30-39-vuotiaat</option>
    <option value="354">Naiset naimisissa vieraskieliset 30-39-vuotiaat</option>
    <option value="355">Naiset eronneet vieraskieliset 30-39-vuotiaat</option>
    <option value="365">Naiset naimaton 40-49-vuotiaat</option>
    <option value="366">Naiset naimisissa 40-49-vuotiaat</option>
    <option value="367">Naiset eronneet 40-49-vuotiaat</option>
    <option value="368">Naiset naimaton kotimaiset kielet 40-49-vuotiaat</option>
    <option value="369">Naiset naimisissa kotimaiset kielet 40-49-vuotiaat</option>
    <option value="370">Naiset eronneet kotimaiset kielet 40-49-vuotiaat</option>
    <option value="371">Naiset naimaton vieraskieliset 40-49-vuotiaat</option>
    <option value="372">Naiset naimisissa vieraskieliset 40-49-vuotiaat</option>
    <option value="373">Naiset eronneet vieraskieliset 40-49-vuotiaat</option>
    <option value="552">Nettoinvestoinnit</option>
    <option value="91">Nuorisotoiminnan avustukset</option>
    <option value="240">Nuorisotyöttömät, % 18 - 24-vuotiaasta työvoimasta</option>
    <option value="115">Omaehtoinen opiskelu</option>
    <option value="44">Omaisuustulot, keskiarvo</option>
    <option value="30">Omassa seutukunnassa työssäkäyvät</option>
    <option value="200">Omassa seutukunnassa työssäkäyvät, %</option>
    <option value="272">Omistusasunnossa asuvat asuntokunnat</option>
    <option value="94">Opiskelijat</option>
    <option value="53">Osingot, brutto </option>
    <option value="95">Ostovoima</option>
    <option value="556">Osuus yhteisöveron tuotosta</option>
    <option value="406">Pahoinpitely, miehet</option>
    <option value="407">Pahoinpitely, naiset</option>
    <option value="18">Palkkatuki</option>
    <option value="41">Palkkatulot, ei perusasteen tutkintoa</option>
    <option value="42">Palkkatulot, keskiarvo</option>
    <option value="62e">Palkkatulot, tutkinnon suorittaneet</option>
    <option value="206">Palvelujen työpaikkojen osuus, %</option>
    <option value="30c">Palvelutoimialojen työlliset</option>
    <option value="228">Pelaa rahapelejä viikoittain % 8. ja 9. </option>
    <option value="59">Perheet, joissa alle 3-vuotiaita lapsia</option>
    <option value="278">Perheisiin kuulumattomat miehet 0-14-vuotiaat</option>
    <option value="279">Perheisiin kuulumattomat miehet 15-24-vuotiaat</option>
    <option value="280">Perheisiin kuulumattomat miehet 25-34-vuotiaat</option>
    <option value="281">Perheisiin kuulumattomat miehet 35-44-vuotiaat</option>
    <option value="282">Perheisiin kuulumattomat miehet 45-54-vuotiaat</option>
    <option value="283">Perheisiin kuulumattomat miehet 55-64-vuotiaat</option>
    <option value="284">Perheisiin kuulumattomat miehet yli 65-vuotiaat</option>
    <option value="306">Perheisiin kuulumattomat miehet yhteensä</option>
    <option value="285">Perheisiin kuulumattomat naiset 0-14-vuotiaat</option>
    <option value="286">Perheisiin kuulumattomat naiset 15-24-vuotiaat</option>
    <option value="287">Perheisiin kuulumattomat naiset 25-34-vuotiaat</option>
    <option value="288">Perheisiin kuulumattomat naiset 35-44-vuotiaat</option>
    <option value="289">Perheisiin kuulumattomat naiset 45-54-vuotiaat</option>
    <option value="290">Perheisiin kuulumattomat naiset 55-64-vuotiaat</option>
    <option value="291">Perheisiin kuulumattomat naiset yli 65-vuotiaat</option>
    <option value="307">Perheisiin kuulumattomat naiset yhteensä</option>
    <option value="1">Perhekoko, aviopari</option>
    <option value="292">Perheväestö miehet 0-14-vuotiaat</option>
    <option value="293">Perheväestö miehet 15-24-vuotiaat</option>
    <option value="294">Perheväestö miehet 25-34-vuotiaat</option>
    <option value="295">Perheväestö miehet 35-44-vuotiaat</option>
    <option value="296">Perheväestö miehet 45-54-vuotiaat</option>
    <option value="297">Perheväestö miehet 55-64-vuotiaat</option>
    <option value="298">Perheväestö miehet yli 65-vuotiaat</option>
    <option value="308">Perheväestö miehet yhteensä</option>
    <option value="299">Perheväestö naiset 0-14-vuotiaat</option>
    <option value="300">Perheväestö naiset 15-24-vuotiaat</option>
    <option value="301">Perheväestö naiset 25-34-vuotiaat</option>
    <option value="302">Perheväestö naiset 35-44-vuotiaat</option>
    <option value="303">Perheväestö naiset 45-54-vuotiaat</option>
    <option value="304">Perheväestö naiset 55-64-vuotiaat</option>
    <option value="305">Perheväestö naiset yli 65-vuotiaat</option>
    <option value="309">Perheväestö naiset yhteensä</option>
    <option value="132">Peruskoulun päättäneet, ei jatko-opintoja</option>
    <option value="9">Perusterveydenhuollon nettokäyttökustannukset</option>
    <option value="391">Perusturvan osuus yli puolet tuloista</option>
    <option value="392">Perusturvan osuus yli puolet tuloista, lapsia</option>
    <option value="96">Pienituloinen asuntoväestö</option>
    <option value="98">Pienituloisten henkilöiden lukumäärä asuntoväestössä</option>
    <option value="384">Pienituloisten lasten lukumäärä asuntoväestössä</option>
    <option value="276">Pinta-ala/henkilö, m2</option>
    <option value="389">Pitkittyneesti perusturvan varassa</option>
    <option value="390">Pitkittyneesti perusturvan varassa, lapsia</option>
    <option value="385">Pitkittyneesti pienituloisten henkilöiden lukumäärä asuntoväestössä</option>
    <option value="386">Pitkittyneesti pienituloisten lasten lukumäärä asuntoväestössä</option>
    <option value="199">Poliisin tietoon tulleet omaisuusrikokset / 1 000 asukasta</option>
    <option value="413">Puun myyntitulot metsäverotuksessa</option>
    <option value="211">Päihtyneenä väkivaltarikoksista epäillyt/1000</option>
    <option value="90">Päivä- ja äitiyspäivärahat</option>
    <option value="396">Pääomatulot keskimäärin, euroa</option>
    <option value="408">Raiskaus, miehet</option>
    <option value="24">Rakentamisen työpaikat</option>
    <option value="233">Rakentamisen työpaikkojen osuus kaikista työpaikoista, %</option>
    <option value="119">Raportoidut omaisuusrikokset</option>
    <option value="123">Raportoidut seksuaalirikokset</option>
    <option value="121">Raportoidut väkivaltarikokset</option>
    <option value="409">Rattijuopumus, miehet</option>
    <option value="410">Rattijuopumus, naiset</option>
    <option value="187">Rikoksista epäillyt 18-20/1000</option>
    <option value="415">Rivitalokauppojen lukumäärä</option>
    <option value="414">Rivitalot neliöhinta (EUR/m2)</option>
    <option value="92">Saadut tulonsiirrot, keskiarvo</option>
    <option value="120">Selvitetyt omaisuusrikokset</option>
    <option value="125">Selvitetyt omaisuusrikokset 18-29 -vuotiaat</option>
    <option value="126">Selvitetyt omaisuusrikokset 30-49 -vuotiaat</option>
    <option value="127">Selvitetyt omaisuusrikokset 50-64 -vuotiaat</option>
    <option value="124">Selvitetyt seksuaalirikokset</option>
    <option value="122">Selvitetyt väkivaltarikokset</option>
    <option value="232">Sepelvaltimotauti-indeksi</option>
    <option value="79">Sisäänpendelöinti</option>
    <option value="207">Sisäänpendelöinti, % alueella työssäkäyvistä</option>
    <option value="316">Solmitut avioliitot</option>
    <option value="133">Suomessa syntyneitä ulkomaalaistaustaisia</option>
    <option value="551">Suunnitelman mukaiset poistot ja arvonalet</option>
    <option value="58b">Syntyneet, äiti alle 20-vuotias</option>
    <option value="57">Syntyneet, äiti 20-29 -vuotias</option>
    <option value="58a">Syntyneet, äiti 30-34 -vuotias</option>
    <option value="58">Syntyneet , äiti yli 34-vuotias</option>
    <option value="102">Syntyneitä / 1000 asukasta</option>
    <option value="131">Syntyvyys</option>
    <option value="25">Teollisuuden työpaikat</option>
    <option value="234">Teollisuuden työpaikkojen osuus kaikista työpaikoista, %</option>
    <option value="148">Teollisuusrakennus jälleenhankinta-arvo</option>
    <option value="26">Terveys- ja sosiaalipalvelujen työpaikat</option>
    <option value="235">Terveys- ja sosiaalipalvelujen työpaikkojen osuus kaikista työpaikoista, %</option>
    <option value="561">Terveyspuntari kansantauti-indeksi</option>
    <option value="560">Terveyspuntari sairastavuusindeksi</option>
    <option value="300a">THL:n sairastavuusindeksi</option>
    <option value="553">Tilikauden yli- tai alijäämä</option>
    <option value="241">Toimeentulotukea saaneet lapsiperheet, % lapsiperheistä</option>
    <option value="99">Toimeentulotukea yksin asuvat miehet</option>
    <option value="100">Toimeentulotukea yksin asuvat naiset</option>
    <option value="130">Toimeentulotuki</option>
    <option value="546">Toimintakulut</option>
    <option value="545">Toimintatuotot</option>
    <option value="14">Toisen asteen tutkinnon suorittaneet, 20+ -vuotiaat miehet</option>
    <option value="15">Toisen asteen tutkinnon suorittaneet, 20+ -vuotiaat naiset</option>
    <option value="424">Toisen asteen tutkinto miehet 20-24</option>
    <option value="430">Toisen asteen tutkinto miehet 25-29</option>
    <option value="436">Toisen asteen tutkinto miehet 30-34</option>
    <option value="442">Toisen asteen tutkinto miehet 35-39</option>
    <option value="448">Toisen asteen tutkinto miehet 40-44</option>
    <option value="455">Toisen asteen tutkinto miehet 45-49</option>
    <option value="461">Toisen asteen tutkinto miehet 50-54</option>
    <option value="467">Toisen asteen tutkinto miehet 55-59</option>
    <option value="473">Toisen asteen tutkinto miehet 60-64</option>
    <option value="479">Toisen asteen tutkinto miehet 65-69</option>
    <option value="485">Toisen asteen tutkinto miehet 70-74</option>
    <option value="491">Toisen asteen tutkinto miehet 75-</option>
    <option value="427">Toisen asteen tutkinto naiset 20-24</option>
    <option value="433">Toisen asteen tutkinto naiset 25-29</option>
    <option value="439">Toisen asteen tutkinto naiset 30-34</option>
    <option value="445">Toisen asteen tutkinto naiset 35-39</option>
    <option value="451">Toisen asteen tutkinto naiset 40-44</option>
    <option value="458">Toisen asteen tutkinto naiset 45-49</option>
    <option value="464">Toisen asteen tutkinto naiset 50-54</option>
    <option value="470">Toisen asteen tutkinto naiset 55-59</option>
    <option value="476">Toisen asteen tutkinto naiset 60-64</option>
    <option value="482">Toisen asteen tutkinto naiset 65-69</option>
    <option value="488">Toisen asteen tutkinto naiset 70-74</option>
    <option value="494">Toisen asteen tutkinto naiset 75-</option>
    <option value="393">Tulonsaajia</option>
    <option value="247">Tulot/verot alle 25 -vuotiaat</option>
    <option value="248">Tulot/verot 25-29 -vuotiaat</option>
    <option value="249">Tulot/verot 30-34 -vuotiaat</option>
    <option value="250">Tulot/verot 35-39 -vuotiaat</option>
    <option value="251">Tulot/verot 40-44 -vuotiaat</option>
    <option value="252">Tulot/verot 45-49 -vuotiaat</option>
    <option value="253">Tulot/verot 50-54 -vuotiaat</option>
    <option value="254">Tulot/verot 55-59 -vuotiaat</option>
    <option value="255">Tulot/verot 60-64 -vuotiaat</option>
    <option value="256">Tulot/verot 65-69 -vuotiaat</option>
    <option value="257">Tulot/verot 70-74 -vuotiaat</option>
    <option value="258">Tulot/verot 75-79 -vuotiaat</option>
    <option value="259">Tulot/verot 80-84 -vuotiaat</option>
    <option value="260">Tulot/verot yli 85 -vuotiaat</option>
    <option value="261">Tulot/verot yhteensä</option>
    <option value="398">Tulot miinus verot keskimäärin, euroa</option>
    <option value="558">Tuloveroprosentti</option>
    <option value="45">Tuotannontekijätulot, keskiarvo</option>
    <option value="106">Tupakoi päivittäin % 8. ja 9.</option>
    <option value="144">Työkyvyttömyyseläke miehet</option>
    <option value="143">Työkyvyttömyyseläke naiset</option>
    <option value="19">Työkyvyttömyysindeksi</option>
    <option value="39">Työlliset, 18-24 -vuotiaat</option>
    <option value="38">Työlliset, 25-34 -vuotiaat</option>
    <option value="37">Työlliset, 35-44 -vuotiaat</option>
    <option value="36">Työlliset, 45-54 -vuotiaat</option>
    <option value="35">Työlliset, 55-59 -vuotiaat</option>
    <option value="34">Työlliset, 60-64 -vuotiaat</option>
    <option value="29">Työlliset, korkea-asteen koulutus</option>
    <option value="27">Työlliset, perusasteen koulutus</option>
    <option value="28">Työlliset, toisen asteen koulutus</option>
    <option value="227">Työllisyysaste, 18-24 -vuotiaat</option>
    <option value="226">Työllisyysaste, 25-34 -vuotiaat</option>
    <option value="225">Työllisyysaste, 35-44 -vuotiaat</option>
    <option value="224">Työllisyysaste, 45-54 -vuotiaat</option>
    <option value="223">Työllisyysaste, 55-59 -vuotiaat</option>
    <option value="222">Työllisyysaste, 60-64 -vuotiaat</option>
    <option value="113">Työllisyyspalveluissa yhteensä</option>
    <option value="221">Työttömien aktivointiaste %</option>
    <option value="101">Työttömyysetuudet</option>
    <option value="300b">Työttömyysetuudet alle 25 vuotiaat</option>
    <option value="3">Työttömyysetuudet 25-29 vuotiaat</option>
    <option value="179">Työttömyysetuudet 30-34 -vuotiaat</option>
    <option value="180">Työttömyysetuudet 35-39 -vuotiaat</option>
    <option value="181">Työttömyysetuudet 40-44 -vuotiaat</option>
    <option value="182">Työttömyysetuudet 45-49 -vuotiaat</option>
    <option value="183">Työttömyysetuudet 50-54 -vuotiaat</option>
    <option value="184">Työttömyysetuudet 55-59 -vuotiaat</option>
    <option value="185">Työttömyysetuudet yli 60- vuotiaat</option>
    <option value="186">Työttömyysetuudet yhteensä</option>
    <option value="110">Ulkomaalaistaustaisia</option>
    <option value="567">Ulkomaan kansalaiset, eurooppalaiset</option>
    <option value="568">Ulkomaan kansalaiset miehet, eurooppalaiset</option>
    <option value="569">Ulkomaan kansalaiset naiset, eurooppalaiset</option>
    <option value="112">Ulkomaan kansalaisia</option>
    <option value="111">Ulkomailla syntyneitä</option>
    <option value="134">Ulkomailla syntyneitä ulkomaalaistaustaisia</option>
    <option value="80">Ulospendelöinti</option>
    <option value="195">Ulospendelöinti, % alueen työllisistä</option>
    <option value="72">Uudet henkilö- ja pakettiautokortit (B)</option>
    <option value="242">Vaikeasti työllistyvät (rakennetyöttömyys), % 15 - 64-vuotiaista</option>
    <option value="147">Vakituinen asuinrakennus verotusarvo</option>
    <option value="149">Valtion ansiotulovero alle 25 -vuotiaat</option>
    <option value="150">Valtion ansiotulovero 25-29 -vuotiaat</option>
    <option value="151">Valtion ansiotulovero 30-34 -vuotiaat</option>
    <option value="152">Valtion ansiotulovero 35-39 -vuotiaat</option>
    <option value="153">Valtion ansiotulovero 40-44 -vuotiaat</option>
    <option value="154">Valtion ansiotulovero 45-49 -vuotiaat</option>
    <option value="155">Valtion ansiotulovero 50-54 -vuotiaat</option>
    <option value="156">Valtion ansiotulovero 55-59 -vuotiaat</option>
    <option value="157">Valtion ansiotulovero 60-64 -vuotiaat</option>
    <option value="158">Valtion ansiotulovero 65-69 -vuotiaat</option>
    <option value="159">Valtion ansiotulovero 70-74 -vuotiaat</option>
    <option value="160">Valtion ansiotulovero 75-79 -vuotiaat</option>
    <option value="161">Valtion ansiotulovero 80-84 -vuotiaat</option>
    <option value="162">Valtion ansiotulovero yli 85 -vuotiaat</option>
    <option value="163">Valtion ansiotulovero yhteensä</option>
    <option value="164">Valtion pääomatulovero alle 25 -vuotiaat</option>
    <option value="165">Valtion pääomatulovero 25-29 -vuotiaat</option>
    <option value="166">Valtion pääomatulovero 30-34 -vuotiaat</option>
    <option value="167">Valtion pääomatulovero 35-39 -vuotiaat</option>
    <option value="168">Valtion pääomatulovero 40-44 -vuotiaat</option>
    <option value="169">Valtion pääomatulovero 45-49 -vuotiaat</option>
    <option value="170">Valtion pääomatulovero 50-54 -vuotiaat</option>
    <option value="171">Valtion pääomatulovero 55-59 -vuotiaat</option>
    <option value="172">Valtion pääomatulovero 60-64 -vuotiaat</option>
    <option value="173">Valtion pääomatulovero 65-69 -vuotiaat</option>
    <option value="174">Valtion pääomatulovero 70-74 -vuotiaat</option>
    <option value="175">Valtion pääomatulovero 75-79 -vuotiaat</option>
    <option value="176">Valtion pääomatulovero 80-84 -vuotiaat</option>
    <option value="177">Valtion pääomatulovero yli 85 -vuotiaat</option>
    <option value="178">Valtion pääomatulovero yhteensä</option>
    <option value="548">Valtionosuudet</option>
    <option value="108">Valtionvero keskimäärin, euroa</option>
    <option value="411">Varkaus, miehet</option>
    <option value="412">Varkaus, naiset</option>
    <option value="401">Velat yhteensä, euroa</option>
    <option value="394">Veronalaiset tulot keskimäärin, euroa</option>
    <option value="46">Veronalaiset tulot, mediaani, euroa</option>
    <option value="379">Verot ansiotuloista, keskiarvo</option>
    <option value="380">Verot pääomatuloista, keskiarvo</option>
    <option value="397">Verot yhteensä keskimäärin, euroa</option>
    <option value="547">Verotulot</option>
    <option value="246">Verotulot / asukas</option>
    <option value="191">Vieraskieliset/1000 asukasta</option>
    <option value="318">Vieraskieliset miehet</option>
    <option value="319">Vieraskieliset naiset</option>
    <option value="7a">Vieraskielisiä</option>
    <option value="4">Viranomaisten tehtävät</option>
    <option value="402">Vireille pannut konkurssit, yritykset lkm</option>
    <option value="20">Voittoa tavoittelemattomien yhteisöjen työpaikat</option>
    <option value="273">Vuokra-asunnoissa asuvat asuntokunnat</option>
    <option value="550">Vuosikate</option>
    <option value="565">Väestö, kaupunkialuuet</option>
    <option value="566">Väestö, maaseutualueet</option>
    <option value="104">Väestölisäys</option>
    <option value="2">Väkivaltarikokset</option>
    <option value="67">YEL-työtulo</option>
    <option value="60">Yhden vanhemman perheet, lapset 0-17</option>
    <option value="198">Yhden vanhemman perheet %</option>
    <option value="274">Yhteisöjen verotettava tulo</option>
    <option value="275">Yhteisöverot</option>
    <option value="453">Yksityisen sektorin työpaikat</option>
    <option value="236">Ylipaino % 8. ja 9.</option>
    <option value="212">Yrittäjien osuus työllisistä, %</option>
    <option value="33">Yrittäjät, miehet</option>
    <option value="69">Yrittäjät, naiset</option>
    <option value="43">Yrittäjätulot, keskiarvo</option>
    <option value="374">Yrittäjätulot maataloudesta, keskiarvo</option>
    <option value="375">Yrittäjätulot metsätaloudesta, keskiarvo</option>
    <option value="376">Yrittäjätulot elinkeinotoiminnasta, keskiarvo</option>
    <option value="116">Yrityskanta</option>
    <option value="64">Äiti ja lapsia</option>
    <option value="64a">Äiti ja alle 3-v. lapsia</option>
    <option value="64b">Äiti ja alle 7-v. lapsia</option>
    <option value="208">Äänestysprosentti eduskuntavaalit miehet</option>
    <option value="202">Äänestysprosentti eduskuntavaalit naiset</option>
    <option value="201">Äänestysprosentti kunnallisvaalit</option>
    </select>
    </div>
    <section id="cssfun2">
        <label></label>
        <input type="range">
        <label></label>
    </section>
<div id="d3-kunta">
</div>
<h6>
Kuntakohtaiset tilastomuuttujat ovat JSON -tiedostomuotoon luotu tietokanta muuttujien v&auml;lisist&auml; korrelaatiokertoimista. Sen avulla voi havainnollistaa muutoksiin liittyvi&auml; heijastevaikutuksia.

L&auml;hdeaineisto on koottu p&auml;&auml;osin Kelan, Tilastokeskuksen, THL:n ja Verohallinnon tilastotietokannoista.

Korrelaatiot on laskettu vuosien 2014 ja 2018 v&auml;lisest&auml; muutoksesta, tai kyseist&auml; ajanjaksoa l&auml;himmilt&auml; vuosilta, kuten esimerkiksi kunnallis-, eduskunta- ja eurovaaleihin liittyv&auml; tieto. T&auml;ll&auml; hetkell&auml; vertailussa on 600 muuttujaa.

L&auml;hdeaineistoille on laskettu my&ouml;s niiden tilastollista luotettavuutta kuvaavia indikaattoreita. L&auml;hdeaineisto julkaistaan myöhemmin Excel-taulukkona.

Aineisto on tarkoitettu ensisijaisesti vihjetietokannaksi, joka toivon mukaan auttaa hahmottamaan, ja arvioimaan eri muuttujien v&auml;lisi&auml; suhteita, ja riippuvuuksia visualisoinnin keinoin. Pelk&auml;n tietokannan perusteella ei kuitenkaan tule tehd&auml; kovin pitk&auml;lle menevi&auml; johtop&auml;&auml;t&ouml;ksi&auml;, vaan sen tarkoituksena on toimia pikemmin kannusteena varsinaiselle tutkimukselle.

Näin k&auml;yt&auml;t tietokantaa:

<ol>

<li>Rajaa hakusanalla, esimerkiksi vero, 0, naiset, ty&ouml;, jne...</li>

<li>Valitse ja hylk&auml;&auml; muuttujia, nimikett&auml; klikkaamalla</li>

<li>S&auml;&auml;d&auml; korrelaatiokertoimien minimiarvoja</li>

<li>Liikuttele alle ilmestyv&auml;&auml; kuviota</li>

<li>Kuviossa n&auml;kyv&auml;t my&ouml;s korrelaatiokertoimet</li>

</ol>

Tietokanta on julkaistu avoimena l&auml;hdekoodina <a href="https://github.com/tilastomuuttujat/kuntatilastomuuttujat">GitHub</a>-verkkopalvelussa. Avoimella l&auml;hdekoodilla tarkoitetaan ohjelmistoa, jota k&auml;ytt&auml;j&auml; voi vapaasti hy&ouml;dynt&auml;&auml;, muokata, sek&auml; jaella uudestaan.
</h6>
</div>
    <script>
var konsoli=[];
var minval = -0.3,
    maxval = 0.3;
var width  = 1200,
    height = 900;
var sitems=[];
var force = d3.layout.force()
    .charge(-3000)
    .gravity(.8)
    .size([width, height]);

var nodes = force.nodes(),
links = force.links();

var svgNodes, svgLinks, svgTexts, labels;
var svg = d3.select("#d3-kunta").append("svg")
    .attr("width", width)
    .attr("height", height);

function draw() {
d3.selectAll("#d3-kunta > *").remove();
svg = d3.select("#d3-kunta").append("svg")
    .attr("width", width)
    .attr("height", height);
    
force = d3.layout.force()
    .charge(-3000)
    .gravity(.8)
    .size([width, height]);
nodes = force.nodes();
links = force.links();

links = konsoli.filter(function(d){return d.value < minval || d.value > maxval;});
konsoli = [];
links.forEach(function (link) {
link.source = nodes[link.source] || (nodes[link.source] = {name: link.source, linkCount: link.value});
link.target = nodes[link.target] || (nodes[link.target] = {name: link.target, linkCount: link.value});
});

nodes = d3.values(nodes)
links.forEach(function (link) {
  link.linkWidth  = 3;
  link.headLength = 15;
  link.headWidth  = 5;
});

force
    .nodes(nodes)
    .links(links)
    .on("tick", tick)
    .start();

nodes.forEach(function(node) {node.r = 3 + 1.1 * node.weight })

svgLinks = svg.selectAll(".link").data(links)
  .enter().append("polygon")
    .attr("class", function (d) { 
    if (d.value>minval && d.value<maxval) {
    return "link licensing";
    } else {
    if (d.value<0) {
    return "link suit"
    }
    if (d.value>0) {
    return "link resolved"
    }}
    });
    
svgNodes = svg.selectAll(".node").data(nodes)
  .enter().append("circle")
    .attr("class", "node")
    .attr("r", function (d) {return d.r})
    .call(force.drag);

svgTexts = svg.selectAll("text").data(nodes)
  .enter().append("text")
    .attr("y", ".31em")
    .text(function(d) {return d.name});

edgepaths = svg.selectAll(".edgepath")
            .data(links)
            .enter()
            .append('path')
            .attr({
                'class': 'edgepath',
                'fill-opacity': 0,
                'stroke-opacity': 0,
                'id': function (d, i) {return 'edgepath' + i}
            })
            .style("pointer-events", "none");

edgelabels = svg.selectAll(".edgelabel")
            .data(links)
            .enter()
            .append('text')
            .style("pointer-events", "none")
            .attr({
                'class': 'edgelabel',
                'id': function (d, i) {return 'edgelabel' + i},
                'font-size': 10,
                'fill': '#aaa'
            });

edgelabels.append('textPath')
            .attr('xlink:href', function (d, i) {return '#edgepath' + i})
            .style("text-anchor", "middle")
            .style("pointer-events", "none")
            .attr("startOffset", "50%")
            .text(function (d) {return d.value.toLocaleString({minimumFractionDigits: 2,})});
}

function tick() {
  svgNodes.attr("transform", translate);
  svgTexts.attr("transform", translate);
  svgLinks.attr("points", calculatePolygon);
  
  
  edgepaths.attr('d', function (d) {
            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y;
        });

}

function translate (d) {
  return "translate(" + d.x + "," + d.y + ")";
}

function calculatePolygon(d) {
  var p2  = d.source,
      w   = diff(d.target, p2),
      wl  = length(w),
      v1  = scale(w, (wl - d.target.r) / wl),
      p1  = sum(p2, v1),
      v2  = scale(rotate90(w), d.linkWidth / length(w)),
      p3  = sum(p2, v2),
      v1l = length(v1),
      v3  = scale(v1, (v1l - d.headLength) / v1l),
      p4  = sum(p3, v3),
      v2l = length(v2),
      v4  = scale(v2, d.headWidth / v2l),
      p5  = sum(p4, v4);
  return pr(p1) +" "+ pr(p2) +" "+ pr(p3) +" "+ pr(p4) +" "+ pr(p5);
  
  function length(v) {return Math.sqrt(v.x * v.x + v.y * v.y)}
  function diff(v, w) {return {x: v.x - w.x, y: v.y - w.y}}
  function sum(v, w) {return {x: v.x + w.x, y: v.y + w.y}}
  function scale(v, f) {return {x: f * v.x, y: f * v.y}}
  function rotate90(v) {return {x: v.y, y: -v.x}}
  function pr(v) {return v.x +","+ v.y}
}

function valinnat(items) {
sitems=items;
	for ( x = 0; x < items.length; x++ ) {
	var fitems = "data/F"+items[x]+".json";
	$.ajax({dataType: "json", url: fitems, data: links, async: false, success: function(data) {
    for ( y = 0; y < data.links.length; y++ ) {
	konsoli.push({source: data.links[y].source, target: data.links[y].target, value: data.links[y].value});
	}}});
	}
	draw();
	}
	
var $inputs = $("input[type=range], span.slider"),
            change = function (event, value, isFirstHandle) {
                $(event.currentTarget).parent("div").next("label").text(value);
            };

    $inputs.eq(0).rsSliderLens({
            paddingStart: .075,
            paddingEnd: .075,
            value: [-30, 30],
            width: 750,
            step: 1,
            min: -100,
            max: 100,
            handle: {
                size: .15
            },
            range: {
                type: 'between'
            },
            ruler: {
                labels: {
                    values: [-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100]
                }
            },
            onChange: function (event, value, isFirstHandle) {
                $("#cssfun2 > label").eq(isFirstHandle ? 0 : 1).text(value + "%");
                if (isFirstHandle) {
                minval = value/100;
                } else {
                maxval = value/100;
                }
                setTimeout(function () {valinnat(sitems)}, 2000);
            }
        });
</script>
</body>
</html>
